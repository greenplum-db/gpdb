-- positive: io limit with correct syntax
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit='pg_default:rbps=1000,wbps=1000,riops=1000,wiops=1000');
CREATE
SELECT io_limit FROM gp_toolkit.gp_resgroup_config WHERE groupname='rg_test_group';
 io_limit                                             
------------------------------------------------------
 pg_default:rbps=1000,wbps=1000,riops=1000,wiops=1000 
(1 row)
DROP RESOURCE GROUP rg_test_group;
DROP

-- with space
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit=' pg_default:rbps=1000,wbps=1000,riops=1000,wiops=1000');
CREATE
DROP RESOURCE GROUP rg_test_group;
DROP

-- with space
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit='pg_default:rbps=1000, wbps=1000,riops=1000,wiops=1000');
CREATE
DROP RESOURCE GROUP rg_test_group;
DROP

-- with *
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit='*:rbps=1000,wbps=1000,riops=1000,wiops=1000');
CREATE
DROP RESOURCE GROUP rg_test_group;
DROP

-- negative: io limit with incorrect syntax
-- * must be unique tablespace
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit='pg_default:rbps=1000,wbps=1000,riops=1000,wiops=1000;*:wbps=1000');
ERROR:  io limit: tablespace '*' cannot be used with other tablespaces  (seg1 127.0.0.2:6001 pid=203823)

-- tail ;
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit='pg_default:rbps=1000,wbps=1000,riops=1000,wiops=1000;');
ERROR:  syntax error  (seg1 127.0.0.2:6001 pid=203823)

-- tail ,
CREATE RESOURCE GROUP rg_test_group WITH (concurrency=10, cpu_max_percent=10, io_limit='pg_default:rbps=1000,wbps=1000,riops=1000,');
ERROR:  syntax error  (seg1 127.0.0.2:6001 pid=203823)

