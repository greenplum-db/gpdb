<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="pg_locks" />
<meta name="DC.relation" scheme="URI" content="../system_catalogs/catalog_ref-html.html#topic1" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<meta name="DC.language" content="en" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>pg_locks</title>
</head>
<body id="topic1">
<h1 class="title topictitle1" id="topic1__gv141670">pg_locks</h1>
<div class="body"><p class="p">The <code class="ph codeph">pg_locks</code> view provides access to information about the locks held by open
      transactions within Greenplum Database.</p>
<p class="p"><code class="ph codeph">pg_locks</code> contains one row per active lockable object,
requested lock mode, and relevant transaction. Thus, the same lockable
object may appear many times if multiple transactions are holding or
waiting for locks on it. An object with no current locks
on it will not appear in the view at all. </p>
<p class="p">There are several distinct types of lockable objects: whole relations
(such as tables), individual pages of relations, individual tuples of
relations, transaction IDs (both virtual and permanent IDs), and general database objects. Also, the right
to extend a relation is represented as a separate lockable object.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic1__gv141982" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>pg_catalog.pg_locks</span></caption><colgroup><col style="width:131pt" /><col style="width:86pt" /><col style="width:85pt" /><col style="width:147pt" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d230397e33">column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d230397e35">type</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d230397e37">references</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d230397e39">description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">locktype</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">text</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Type of the lockable object: <code class="ph codeph">relation</code>,
<code class="ph codeph">extend</code>, <code class="ph codeph">page</code>, <code class="ph codeph">tuple</code>,
<code class="ph codeph">transactionid</code>, <code class="ph codeph">object</code>, <code class="ph codeph">userlock</code>,
<code class="ph codeph">resource queue</code>, or <code class="ph codeph">advisory</code></td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">database</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">oid</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 ">pg_database.oid</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">OID of the database in which the object exists,
zero if the object is a shared object, or NULL if the object is a transaction
ID</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">relation</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">oid</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 ">pg_class.oid</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">OID of the relation, or NULL if the object is
not a relation or part of a relation</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">page </code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">integer</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Page number within the relation, or NULL if
the object is not a tuple or relation page</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">tuple </code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">smallint</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Tuple number within the page, or NULL if the
object is not a tuple</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">virtualxid </code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">text</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Virtual ID of a transaction, or NULL if the object is
not a virtual transaction ID</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">transactionid </code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">xid</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">ID of a transaction, or NULL if the object is
not a transaction ID</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">classid</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">oid</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 ">pg_class.oid</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">OID of the system catalog containing the object,
or NULL if the object is not a general database object</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">objid </code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">oid</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 ">any OID column</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">OID of the object within its system catalog,
or NULL if the object is not a general database object</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">objsubid </code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">smallint</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">For a table column, this is the column number
(the classid and objid refer to the table itself).
For all other object types, this column is zero. NULL if the object is
not a general database object</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">virtualtransaction</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">text</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Virtual ID of the transaction that is holding or awaiting
this lock</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">pid</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">integer</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Process ID of the server process holding or
awaiting this lock. NULL if the lock is held by a prepared transaction</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">mode</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">text</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Name of the lock mode held or desired by this
process</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">granted</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">boolean</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">True if lock is held, false if lock is awaited.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">fastpath</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">boolean</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">True if lock was taken via fastpath, false if lock is taken via main lock table.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">mppsessionid</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">integer</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">The id of the client session associated with
this lock.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">mppiswriter</code></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e35 ">boolean</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d230397e39 ">Specifies whether the lock is held by a writer process.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d230397e33 "><code class="ph codeph">gp_segment_id</code></td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d230397e35 ">integer</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d230397e37 "> </td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d230397e39 ">The Greenplum segment id (<code class="ph codeph">dbid</code>)
              where the lock is held.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../system_catalogs/catalog_ref-html.html#topic1">System Catalogs Definitions</a></div>
</div>
</div></body>
</html>