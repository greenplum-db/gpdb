<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="CREATE LANGUAGE" />
<meta name="DC.relation" scheme="URI" content="../sql_commands/sql_ref.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>CREATE LANGUAGE</title>
</head>
<body id="topic1">

    <h1 class="title topictitle1" id="topic1__bv20941">CREATE LANGUAGE</h1>

    <div class="body">
        <p class="p" id="topic1__sql_command_desc">Defines a new procedural language.</p>

        <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
            
            <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>CREATE [ OR REPLACE ] [ PROCEDURAL ] LANGUAGE &lt;name&gt;

CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE &lt;name&gt;
    HANDLER &lt;call_handler&gt; [ INLINE &lt;inline_handler&gt; ] 
   [ VALIDATOR &lt;valfunction&gt; ]
            </code></pre>
        </div>

        <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p"><code class="ph codeph">CREATE LANGUAGE</code> registers a new procedural language with a Greenplum
                database. Subsequently, functions and trigger procedures can be defined in this new
                language.</p>
 
            <div class="note"><span class="notetitle">Note:</span> Procedural languages for Greenplum Database have been made into "extensions," and
                should therefore be installed with <a class="xref" href="CREATE_EXTENSION.html#topic1">CREATE EXTENSION</a>, not
                    <code class="ph codeph">CREATE LANGUAGE</code>. Using <code class="ph codeph">CREATE LANGUAGE</code>
                directly should be restricted to extension installation scripts. If you have a
                "bare" language in your database, perhaps as a result of an upgrade, you can convert
                it to an extension using <code class="ph codeph">CREATE EXTENSION <var class="keyword varname">langname</var> FROM
                    unpackaged</code>. </div>

            <p class="p">Superusers can register a new language with a Greenplum database. A database owner
                can also register within that database any language listed in the
                    <code class="ph codeph">pg_pltemplate</code> catalog in which the
                    <code class="ph codeph">tmpldbacreate</code> field is true. The default configuration allows
                only trusted languages to be registered by database owners. The creator of a
                language becomes its owner and can later drop it, rename it, or assign ownership to
                a new owner.</p>

            <p class="p"><code class="ph codeph">CREATE OR REPLACE LANGUAGE</code> will either create a
                new language, or replace an existing definition. If the language
                already exists, its parameters are updated according to the values
                specified or taken from <var class="keyword varname">pg_pltemplate</var>,
                but the language's ownership and permissions settings do not change,
                and any existing functions written in the language are assumed to still
                be valid. In addition to the normal privilege requirements for creating
                a language, the user must be superuser or owner of the existing language.
                The <code class="ph codeph">REPLACE</code> case is mainly meant to be used to
                ensure that the language exists. If the language has a
                <var class="keyword varname">pg_pltemplate</var> entry then <code class="ph codeph">REPLACE</code>
                will not actually change anything about an existing definition, except in
                the unusual case where the <var class="keyword varname">pg_pltemplate</var> entry
                has been modified since the language was created.
            </p>

            <p class="p"><code class="ph codeph">CREATE LANGUAGE</code> effectively associates the language name with
                handler function(s) that are responsible for running functions written in that language. For a
                function written in a procedural language (a language other than C or SQL), the
                database server has no built-in knowledge about how to interpret the function's
                source code. The task is passed to a special handler that knows the details of the
                language. The handler could either do all the work of parsing, syntax analysis,
                execution, and so on or it could serve as a bridge between Greenplum Database and an
                existing implementation of a programming language. The handler itself is a C
                language function compiled into a shared object and loaded on demand, just like any
                other C function. Therese procedural language packages are included in the standard
                Greenplum Database distribution: PL/pgSQL, PL/Perl, and PL/Python. Language handlers
                have also been added for PL/Java and PL/R, but those languages are not pre-installed
                with Greenplum Database. See the topic on <a class="xref" href="https://www.postgresql.org/docs/9.4/xplang.html" target="_blank">Procedural Languages</a> in the PostgreSQL documentation for
                more information on developing functions using these procedural languages.</p>

            <p class="p">The PL/Perl, PL/Java, and PL/R libraries require the correct versions of Perl, Java,
                and R to be installed, respectively. </p>

            <p class="p">On RHEL and SUSE platforms, download the appropriate extensions
                from <a class="xref" href="https://network.pivotal.io/products/pivotal-gpdb" target="_blank">VMware Tanzu
                    Network</a>, then install the extensions using the Greenplum Package Manager
                    (<code class="ph codeph">gppkg</code>) utility to ensure that all dependencies are installed
                as well as the extensions. See the Greenplum Database Utility Guide for details
                about <code class="ph codeph">gppkg</code>. </p>

            <p class="p">There are two forms of the <code class="ph codeph">CREATE LANGUAGE</code> command. In the first
                form, the user specifies the name of the desired language and the Greenplum Database
                server uses the <code class="ph codeph">pg_pltemplate</code> system catalog to determine the
                correct parameters. In the second form, the user specifies the language parameters
                as well as the language name. You can use the second form to create a language that
                is not defined in <code class="ph codeph">pg_pltemplate</code>. </p>

            <p class="p">When the server finds an entry in the <code class="ph codeph">pg_pltemplate</code> catalog for the
                given language name, it will use the catalog data even if the command includes
                language parameters. This behavior simplifies loading of old dump files, which are
                likely to contain out-of-date information about language support functions.</p>

        </div>

        <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">TRUSTED</dt>

                    <dd class="dd pd"><code class="ph codeph">TRUSTED</code> specifies that the language does
                        not grant access to data that the user would not otherwise
                        have. If this key word is omitted
                        when registering the language, only users with the
                        Greenplum Database superuser privilege can
                        use this language to create new functions.</dd>

                
                
                    <dt class="dt pt dlterm">PROCEDURAL</dt>

                    <dd class="dd pd">This is a noise word.</dd>

                
                
                    <dt class="dt pt dlterm">
                        <var class="keyword varname">name</var>
                    </dt>

                    <dd class="dd pd">The name of the new procedural language. The name must be unique among the
                        languages in the database. Built-in support is included for
                            <code class="ph codeph">plpgsql</code>, <code class="ph codeph">plperl</code>, and
                            <code class="ph codeph">plpythonu</code>. The languages <code class="ph codeph">plpgsql</code>
                        (PL/pgSQL) and <code class="ph codeph">plpythonu</code> (PL/Python) are installed by
                        default in Greenplum Database.</dd>

                
                
                    <dt class="dt pt dlterm">HANDLER <var class="keyword varname">call_handler</var></dt>

                    <dd class="dd pd">Ignored if the server has an entry for the specified language name in
                            <code class="ph codeph">pg_pltemplate</code>. The name of a previously registered
                        function that will be called to run the procedural language functions.
                        The call handler for a procedural language must be written in a compiled
                        language such as C with version 1 call convention and registered with
                        Greenplum Database as a function taking no arguments and returning the
                            <code class="ph codeph">language_handler</code> type, a placeholder type that is
                        simply used to identify the function as a call handler.</dd>

                
                
                    <dt class="dt pt dlterm">INLINE <var class="keyword varname">inline_handler</var></dt>

                    <dd class="dd pd">The name of a previously registered function that is called to run an
                        anonymous code block in this language that is created with the <a class="xref" href="DO.html#topic1">DO</a> command. If an
                            <code class="ph codeph">inline_handler</code> function is not specified, the language
                        does not support anonymous code blocks. The handler function must take one
                        argument of type <code class="ph codeph">internal</code>, which is the <a class="xref" href="DO.html#topic1">DO</a> command internal representation. The
                        function typically return <code class="ph codeph">void</code>. The return value of the
                        handler is ignored. </dd>

                
                
                    <dt class="dt pt dlterm">VALIDATOR <var class="keyword varname">valfunction</var></dt>

                    <dd class="dd pd">Ignored if the server has an entry for the specified language name in
                            <code class="ph codeph">pg_pltemplate</code>. The name of a previously registered
                        function that will be called to run the procedural language functions.
                        The call handler for a procedural language must be written in a compiled
                        language such as C with version 1 call convention and registered with
                        Greenplum Database as a function taking no arguments and returning the
                            <code class="ph codeph">language_handler</code> type, a placeholder type that is
                        simply used to identify the function as a call handler.</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
            
            <p class="p">The PL/pgSQL language is already registered in all databases by default. The
                PL/Python language extension is installed but not registered.</p>

            <p class="p">The system catalog <code class="ph codeph">pg_language</code> records information about the
                currently installed languages.</p>

            <p class="p">To create functions in a procedural language, a user must have the
                    <code class="ph codeph">USAGE</code> privilege for the language. By default,
                    <code class="ph codeph">USAGE</code> is granted to <code class="ph codeph">PUBLIC</code> (everyone) for
                trusted languages. This may be revoked if desired. </p>

            <p class="p">Procedural languages are local to individual databases. You create and drop languages
                for individual databases.</p>

            <p class="p">The call handler function and the validator function (if any) must already exist if
                the server does not have an entry for the language in
                <code class="ph codeph">pg_pltemplate</code>. But when there is an entry, the functions need not
                already exist; they will be automatically defined if not present in the database. </p>

            <p class="p">Any shared library that implements a language must be located in the same
                    <code class="ph codeph">LD_LIBRARY_PATH</code> location on all segment hosts in your Greenplum
                Database array.</p>

        </div>

        <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
            
            <p class="p">The preferred way of creating any of the standard procedural languages is to use
                    <code class="ph codeph">CREATE EXTENSION</code> instead of <code class="ph codeph">CREATE LANGUAGE</code>.
                For example:</p>

            <pre class="pre codeblock"><code>CREATE EXTENSION plperl;</code></pre>
            <p class="p">For a language not known in the <code class="ph codeph">pg_pltemplate</code> catalog:</p>

            <pre class="pre codeblock"><code>CREATE FUNCTION plsample_call_handler() RETURNS 
language_handler
    AS '$libdir/plsample'
    LANGUAGE C;
CREATE LANGUAGE plsample
    HANDLER plsample_call_handler;</code></pre>
        </div>

        <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
            
            <p class="p"><code class="ph codeph">CREATE LANGUAGE</code> is a Greenplum Database extension. </p>

        </div>

        <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
            
            <p class="p"><a class="xref" href="ALTER_LANGUAGE.html#topic1">ALTER LANGUAGE</a>,
                        <a class="xref" href="CREATE_EXTENSION.html">CREATE EXTENSION</a>, <a class="xref" href="CREATE_FUNCTION.html#topic1">CREATE FUNCTION</a>, <a class="xref" href="DROP_EXTENSION.html#topic1">DROP EXTENSION</a>, <a class="xref" href="DROP_LANGUAGE.html#topic1">DROP LANGUAGE</a>,
                        <a class="xref" href="GRANT.html#topic1">GRANT</a>
                <a class="xref" href="DO.html#topic1">DO</a></p>

        </div>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../sql_commands/sql_ref.html">SQL Commands</a></div>
</div>
</div></body>
</html>