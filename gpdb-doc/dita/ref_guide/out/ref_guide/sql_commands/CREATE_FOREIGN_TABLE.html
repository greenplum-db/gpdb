<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="CREATE FOREIGN TABLE" />
<meta name="DC.relation" scheme="URI" content="../sql_commands/sql_ref.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>CREATE FOREIGN TABLE</title>
</head>
<body id="topic1">

    <h1 class="title topictitle1" id="topic1__bv20941">CREATE FOREIGN TABLE</h1>

    <div class="body">
        <p class="p" id="topic1__sql_command_desc">Defines a new foreign table.</p>

        <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
            
            <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>CREATE FOREIGN TABLE [ IF NOT EXISTS ] &lt;table_name&gt; ( [
    &lt;column_name&gt; &lt;data_type&gt; [ OPTIONS ( &lt;option&gt; '&lt;value&gt;' [, ... ] ) ] [ COLLATE &lt;collation&gt; ] [ &lt;column_constraint&gt; [ ... ] ]
      [, ... ]
] )
    SERVER &lt;server_name&gt;
  [ OPTIONS ( [ mpp_execute { 'master' | 'any' | 'all segments' } [, ] ] &lt;option&gt; '&lt;value&gt;' [, ... ] ) ]</code></pre>
        <p class="p">where <var class="keyword varname">column_constraint</var> is:</p>
<pre class="pre codeblock"><code>
[ CONSTRAINT &lt;constraint_name&gt; ]
{ NOT NULL |
  NULL |
  DEFAULT &lt;default_expr&gt; }</code></pre>
        </div>

        <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p"><code class="ph codeph">CREATE FOREIGN TABLE</code> creates a new foreign table
                in the current database.  The user who creates the foreign table becomes
                 its owner.</p>

            <p class="p">If you schema-qualify the table name (for example, <code class="ph codeph">CREATE FOREIGN TABLE myschema.mytable ...</code>), Greenplum Database creates the table in the specified schema. Otherwise, the foreign table is created in the current schema. The name of the foreign table must be distinct from the name of any other foreign table, table, sequence, index, or view in the same schema.</p>

            <p class="p">Because <code class="ph codeph">CREATE FOREIGN TABLE</code> automatically creates a data type that represents the composite type corresponding to one row of the foreign table, foreign tables cannot have the same name as any existing data type in the same schema.</p>

            <p class="p">To create a foreign table, you must have <code class="ph codeph">USAGE</code> privilege on the foreign server, as well as <code class="ph codeph">USAGE</code> privilege on all column types used in the table.</p>

        </div>

        <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">IF NOT EXISTS</dt>

                    <dd class="dd pd">
                        <p class="p">Do not throw an error if a relation with the same name already exists. Greenplum Database issues a notice in this case. Note that there is no guarantee that the existing relation is anything like the one that would have been created.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm"><var class="keyword varname">table_name</var></dt>

                    <dd class="dd pd">
                        <p class="p">The name (optionally schema-qualified) of the foreign table to create.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm"><var class="keyword varname">column_name</var></dt>

                    <dd class="dd pd">
                        <p class="p">The name of a column to create in the new foreign table.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm"><var class="keyword varname">data_type</var></dt>

                    <dd class="dd pd">
                        <p class="p">The data type of the column, including array specifiers.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm">NOT NULL</dt>

                    <dd class="dd pd">
                        <p class="p">The column is not allowed to contain null values.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm">NULL</dt>

                    <dd class="dd pd">
                        <p class="p">The column is allowed to contain null values. This is the default.</p>

                        <p class="p">This clause is provided only for compatibility with non-standard SQL databases. Its use is discouraged in new applications.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm">DEFAULT <var class="keyword varname">default_expr</var></dt>

                    <dd class="dd pd">
                        <p class="p">The <code class="ph codeph">DEFAULT</code> clause assigns a default value for the
                          column whose definition it appears within. The value is any
                          variable-free expression; Greenplum Database does not allow subqueries
                          and cross-references to other columns in the current table. The data
                          type of the default expression must match the data type of the column.</p>

                        <p class="p">Greenplum Database uses the default expression in any insert operation
                          that does not specify a value for the column. If there is no default
                          for a column, then the default is null.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm"><var class="keyword varname">server_name</var></dt>

                    <dd class="dd pd">
                        <p class="p">The name of an existing server to use for the foreign table.
                          For details on defining a server, see <a class="xref" href="CREATE_SERVER.html#topic1">CREATE
                    SERVER</a>.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm">OPTIONS ( <var class="keyword varname">option</var> '<var class="keyword varname">value</var>' [, ... ] )</dt>

                    <dd class="dd pd">
                        <p class="p">The options for the new foreign table or one of its columns. While option names must be unique, a table option and a column option may have the same name. The option names and values are foreign-data wrapper-specific. Greenplum Database validates the options and values using the foreign-data wrapper's <var class="keyword varname">validator_function</var>.</p>

                    </dd>

                
                
                    <dt class="dt pt dlterm">mpp_execute { 'master' | 'any' | 'all segments' }</dt>

                    <dd class="dd pd">
                        <div class="p">A Greenplum Database-specific option that identifies the host
                            from which the foreign-data wrapper
                            reads or writes data: <ul class="ul" id="topic1__ul_zcg_2vd_mgb">
                                <li class="li"><code class="ph codeph">master</code> (the default)—Read or write data from the
                                    master host.</li>

                                <li class="li"><code class="ph codeph">any</code>—Read data from either the master host or
                                    any one segment, depending on which path costs less.</li>

                                <li class="li"><code class="ph codeph">all segments</code>—Read or write data from all segments. To
                                    support this option value, the foreign-data wrapper must have a
                                    policy that matches the segments to data.
                                 <div class="note"><span class="notetitle">Note:</span> Greenplum Database supports parallel writes to foreign tables
                                   only when you set <code class="ph codeph">mpp_execute 'all segments'</code>.</div>
</li>

                            </ul>
</div>

                        <p class="p">Support for the foreign table <code class="ph codeph">mpp_execute</code> option,
                            and the specific modes, is foreign-data wrapper-specific.</p>

                        <p class="p">The <code class="ph codeph">mpp_execute</code> option can be specified in multiple
                            commands: <code class="ph codeph">CREATE FOREIGN TABLE</code>, <code class="ph codeph">CREATE
                                SERVER</code>, and <code class="ph codeph">CREATE FOREIGN DATA WRAPPER</code>.
                            The foreign table setting takes precedence over the foreign server
                            setting, followed by the foreign-data wrapper setting.</p>

                    </dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
          
          <p class="p">GPORCA does not support foreign tables. A query on a foreign table
           always falls back to the Postgres Planner.</p>

        </div>

        <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
            
            <p class="p">Create a foreign table named <code class="ph codeph">films</code> with the server named <code class="ph codeph">film_server</code>:</p>
<pre class="pre codeblock"><code>CREATE FOREIGN TABLE films (
    code        char(5) NOT NULL,
    title       varchar(40) NOT NULL,
    did         integer NOT NULL,
    date_prod   date,
    kind        varchar(10),
    len         interval hour to minute
)
SERVER film_server;</code></pre>
        </div>

        <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
            
            <p class="p"><code class="ph codeph">CREATE FOREIGN TABLE</code> largely conforms to the SQL standard; however, much as with <a class="xref" href="CREATE_TABLE.html#topic1">CREATE
                    TABLE</a>, Greenplum Database permits <code class="ph codeph">NULL</code> constraints and zero-column foreign tables.
               The ability to specify a default value is a Greenplum Database extension,
               as is the <code class="ph codeph">mpp_execute</code> option.</p>

        </div>

        <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
            
            <p class="p"><a class="xref" href="ALTER_FOREIGN_TABLE.html#topic1">ALTER FOREIGN TABLE</a>,
                        <a class="xref" href="DROP_FOREIGN_TABLE.html#topic1">DROP
                    FOREIGN TABLE</a>,
                        <a class="xref" href="CREATE_TABLE.html#topic1">CREATE
                    TABLE</a>,
                        <a class="xref" href="CREATE_SERVER.html#topic1">CREATE
                    SERVER</a></p>

        </div>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../sql_commands/sql_ref.html">SQL Commands</a></div>
</div>
</div></body>
</html>