<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="gpinitstandby" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>gpinitstandby</title>
</head>
<body id="topic1">

    <h1 class="title topictitle1" id="topic1__js140845">gpinitstandby</h1>

    <div class="body">
        <p class="p">Adds and/or initializes a standby coordinator host for a Greenplum Database system.</p>

        <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
            
            <pre class="pre codeblock"><code>gpinitstandby { -s &lt;standby_hostname&gt; [-P port] | -r | -n } [-a] [-q] 
    [-D] [-S &lt;standby_data_directory&gt;] [-l &lt;logfile_directory&gt;] 
    [--hba-hostnames &lt;boolean&gt;] 

gpinitstandby -v 

gpinitstandby -?</code></pre>
        </div>

        <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">The <code class="ph codeph">gpinitstandby</code> utility adds a backup, standby coordinator instance to
                your Greenplum Database system. If your system has an existing standby coordinator
                instance configured, use the <code class="ph codeph">-r</code> option to remove it before adding
                the new standby coordinator instance. </p>

            <p class="p">Before running this utility, make sure that the Greenplum Database software is
                installed on the standby coordinator host and that you have exchanged SSH keys between
                the hosts. It is recommended that the coordinator port is set to the same port number on
                the coordinator host and the standby coordinator host. </p>

            <p class="p">This utility should be run on the currently active <em class="ph i">primary</em> coordinator host.<span class="ph">
                    See the <em class="ph i">Greenplum Database Installation Guide</em> for instructions.</span></p>

            <p class="p">The utility performs the following steps:</p>

            <ul class="ul">
                <li class="li" id="topic1__js138559">Updates the Greenplum Database system catalog to remove the
                    existing standby coordinator information (if the <code class="ph codeph">-r</code> option is
                    supplied) </li>

                <li class="li" id="topic1__js138555">Updates the Greenplum Database system catalog to add the new
                    standby coordinator instance information </li>

                <li class="li" id="topic1__js138431">Edits the <code class="ph codeph">pg_hba.conf</code> file of the Greenplum
                    Database coordinator to allow access from the newly added standby coordinator</li>

                <li class="li" id="topic1__js137684">Sets up the standby coordinator instance on the alternate coordinator
                    host</li>

                <li class="li" id="topic1__js137686">Starts the synchronization process</li>

            </ul>

            <p class="p">A backup, standby coordinator instance serves as a 'warm standby' in the event of the
                primary coordinator becoming non-operational. The standby coordinator is kept up to date by
                transaction log replication processes (the <code class="ph codeph">walsender</code> and
                    <code class="ph codeph">walreceiver</code>), which run on the primary coordinator and standby
                coordinator hosts and keep the data between the primary and standby coordinator instances
                synchronized. If the primary coordinator fails, the log replication process is shut down,
                and the standby coordinator can be activated in its place by using the
                    <code class="ph codeph">gpactivatestandby</code> utility. Upon activation of the standby
                coordinator, the replicated logs are used to reconstruct the state of the coordinator instance
                at the time of the last successfully committed transaction.</p>

            <p class="p">The activated standby coordinator effectively becomes the Greenplum Database coordinator,
                accepting client connections on the coordinator port and performing normal coordinator
                operations such as SQL command processing and resource management. </p>

            <div class="note important"><span class="importanttitle">Important:</span> If the <code class="ph codeph">gpinitstandby</code> utility previously failed
                to initialize the standby coordinator, you must delete the files in the standby coordinator
                data directory before running <code class="ph codeph">gpinitstandby</code> again. The standby
                coordinator data directory is not cleaned up after an initialization failure because it
                contains log files that can help in determining the reason for the failure.<p class="p">If an
                    initialization failure occurs, a summary report file is generated in the standby
                    host directory <code class="ph codeph">/tmp</code>. The report file lists the directories on
                    the standby host that require clean up.</p>
</div>

        </div>

        <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Options</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">-a (do not prompt)</dt>

                    <dd class="dd pd">Do not prompt the user for confirmation.</dd>

                
                
                    <dt class="dt pt dlterm">-D (debug)</dt>

                    <dd class="dd pd">Sets logging level to debug.</dd>

                
                
                    <dt class="dt pt dlterm">--hba-hostnames <var class="keyword varname">boolean</var></dt>

                    <dd class="dd pd">Optional. Controls whether this utility uses IP addresses or host names in
                        the <code class="ph codeph">pg_hba.conf</code> file when updating this file with addresses
                        that can connect to Greenplum Database. When set to 0 -- the default value
                        -- this utility uses IP addresses when updating this file. When set to 1,
                        this utility uses host names when updating this file. For consistency, use
                        the same value that was specified for <code class="ph codeph">HBA_HOSTNAMES</code> when
                        the Greenplum Database system was initialized. For information about how
                        Greenplum Database resolves host names in the <code class="ph codeph">pg_hba.conf</code>
                        file, see <a class="xref" href="../../admin_guide/client_auth.html" target="_blank">Configuring Client Authentication</a>.</dd>

                
                
                    <dt class="dt pt dlterm">-l <var class="keyword varname">logfile_directory</var></dt>

                    <dd class="dd pd">The directory to write the log file. Defaults to
                            <code class="ph codeph">~/gpAdminLogs</code>.</dd>

                
                
                    <dt class="dt pt dlterm">-n (restart standby coordinator)</dt>

                    <dd class="dd pd">Specify this option to start a Greenplum Database standby coordinator that has
                        been configured but has stopped for some reason.</dd>

                
                
                    <dt class="dt pt dlterm">-P <var class="keyword varname">port</var></dt>

                    <dd class="dd pd">This option specifies the port that is used by the Greenplum Database
                        standby coordinator. The default is the same port used by the active Greenplum
                        Database coordinator. </dd>

                    <dd class="dd pd ddexpand">If the Greenplum Database standby coordinator is on the same host as the active
                        coordinator, the ports must be different. If the ports are the same for the
                        active and standby coordinator and the host is the same, the utility returns an
                        error. </dd>

                
                
                    <dt class="dt pt dlterm">-q (no screen output)</dt>

                    <dd class="dd pd">Run in quiet mode. Command output is not displayed on the screen, but is
                        still written to the log file.</dd>

                
                
                    <dt class="dt pt dlterm">-r (remove standby coordinator)</dt>

                    <dd class="dd pd">Removes the currently configured standby coordinator instance from your Greenplum
                        Database system.</dd>

                
                
                    <dt class="dt pt dlterm">-s standby_hostname</dt>

                    <dd class="dd pd">The host name of the standby coordinator host.</dd>

                
                
                    <dt class="dt pt dlterm">-S <var class="keyword varname">standby_data_directory</var></dt>

                    <dd class="dd pd">The data directory to use for a new standby coordinator. The default is the same
                        directory used by the active coordinator.</dd>

                    <dd class="dd pd ddexpand">If the standby coordinator is on the same host as the active coordinator, a different
                        directory must be specified using this option.</dd>

                
                
                    <dt class="dt pt dlterm">-v (show utility version)</dt>

                    <dd class="dd pd">Displays the version, status, last updated date, and checksum of this
                        utility.</dd>

                
                
                    <dt class="dt pt dlterm">-? (help)</dt>

                    <dd class="dd pd">Displays the online help.</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Examples</h2>
            
            <p class="p">Add a standby coordinator instance to your Greenplum Database system and start the
                synchronization process:</p>

            <pre class="pre codeblock"><code>gpinitstandby -s host09</code></pre>
            <p class="p">Start an existing standby coordinator instance and synchronize the data with the current
                primary coordinator instance:</p>

            <pre class="pre codeblock"><code>gpinitstandby -n</code></pre>
            <div class="note"><span class="notetitle">Note:</span> Do not specify the -n and -s options in the same command.</div>

            <p class="p">Add a standby coordinator instance to your Greenplum Database system specifying a
                different port:</p>

            <pre class="pre codeblock"><code>gpinitstandby -s myhost -P 2222</code></pre>
            <p class="p">If you specify the same host name as the active Greenplum Database coordinator, you must
                also specify a different port number with the <code class="ph codeph">-P</code> option and a
                standby data directory with the <code class="ph codeph">-S</code> option. </p>

            <p class="p">Remove the existing standby coordinator from your Greenplum system configuration:</p>

            <pre class="pre codeblock"><code>gpinitstandby -r</code></pre>
        </div>

        <div class="section" id="topic1__section6"><h2 class="title sectiontitle">See Also</h2>
            
            <p class="p"><a class="xref" href="gpinitsystem.html#topic1">gpinitsystem</a>, <a class="xref" href="gpaddmirrors.html#topic1">gpaddmirrors</a>, <a class="xref" href="gpactivatestandby.html#topic1">gpactivatestandby</a></p>

        </div>

    </div>

</body>
</html>