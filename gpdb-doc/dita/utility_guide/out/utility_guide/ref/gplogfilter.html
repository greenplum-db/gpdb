<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="gplogfilter" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>gplogfilter</title>
</head>
<body id="topic1">
<h1 class="title topictitle1" id="topic1__kw142714">gplogfilter</h1>
<div class="body"><p class="p">Searches through Greenplum Database log files for specified entries.</p>
<div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2><pre class="pre codeblock"><code>gplogfilter [&lt;timestamp_options&gt;] [&lt;pattern_options&gt;] 
     [&lt;output_options&gt;] [&lt;input_options&gt;] [&lt;input_file&gt;] 

gplogfilter --help 

gplogfilter --version</code></pre></div>
<div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2><p class="p">The <code class="ph codeph">gplogfilter</code> utility can be used to search through a Greenplum Database log file for entries matching the specified criteria. If an input
        file is not supplied, then <code class="ph codeph">gplogfilter</code> will use the
          <code class="ph codeph">$COORDINATOR_DATA_DIRECTORY</code> environment variable to locate the Greenplum coordinator log file in the standard logging location. To read
        from standard input, use a dash (<code class="ph codeph">-</code>) as the input file name. Input files may
        be compressed using <code class="ph codeph">gzip</code>. In an input file, a log entry is identified by
        its timestamp in <code class="ph codeph">YYYY-MM-DD [hh:mm[:ss]]</code> format.</p>
<p class="p">You can also use <code class="ph codeph">gplogfilter</code> to search through all segment log files at once by
        running it through the <a class="xref" href="gpssh.html#topic1">gpssh</a> utility.
        For example, to display the last three lines of each segment log file:</p>
<pre class="pre codeblock"><code>gpssh -f seg_host_file
=&gt; source /usr/local/greenplum-db/greenplum_path.sh
=&gt; gplogfilter -n 3 /gpdata/*/log/gpdb*.csv</code></pre><p class="p">By default, the output of <code class="ph codeph">gplogfilter</code> is sent to standard
output. Use the <code class="ph codeph">-o</code> option to send the output to a file
or a directory. If you supply an output file name ending in <code class="ph codeph">.gz</code>,
the output file will be compressed by default using maximum compression.
If the output destination is a directory, the output file is given the
same name as the input file.</p>
</div>
<div class="section" id="topic1__section4"><h2 class="title sectiontitle">Options</h2><div class="sectiondiv" id="topic1__section5"><strong class="ph b">Timestamp Options</strong><dl class="dl parml"><dt class="dt pt dlterm">-b <var class="keyword varname">datetime</var> | --begin=<var class="keyword varname">datetime</var></dt>
<dd class="dd pd">Specifies a starting date and time to begin searching for log entries
in the format of <code class="ph codeph">YYYY-MM-DD [hh:mm[:ss]]</code>.</dd>
<dd class="dd pd ddexpand">If a time is specified, the date and time must be enclosed in either
single or double quotes. This example encloses the date and time in single
quotes:</dd>
<dd class="dd pd ddexpand"><pre class="pre codeblock"><code>gplogfilter -b '2013-05-23 14:33'</code></pre></dd>
<dt class="dt pt dlterm">-e <var class="keyword varname">datetime</var> | --end=<var class="keyword varname">datetime</var></dt>
<dd class="dd pd">Specifies an ending date and time to stop searching for log entries
in the format of <code class="ph codeph">YYYY-MM-DD [hh:mm[:ss]]</code>.</dd>
<dd class="dd pd ddexpand">If a time is specified, the date and time must be enclosed in either
single or double quotes. This example encloses the date and time in single
quotes: </dd>
<dd class="dd pd ddexpand"><pre class="pre codeblock"><code>gplogfilter -e '2013-05-23 14:33' </code></pre></dd>
<dt class="dt pt dlterm">-d&lt;time&gt; | --duration=&lt;time&gt;</dt>
<dd class="dd pd">Specifies a time duration to search for log entries in the format
of <code class="ph codeph">[hh][:mm[:ss]]</code>. If used without either the <code class="ph codeph">-b</code>
or <code class="ph codeph">-e</code> option, will use the current time as a basis.</dd>
</dl>
</div><div class="sectiondiv" id="topic1__section6"><strong class="ph b">Pattern Matching Options</strong><dl class="dl parml"><dt class="dt pt dlterm">-c i [gnore] | r [espect] | --case=i [gnore] | r [espect]</dt>
<dd class="dd pd">Matching of alphabetic characters is case sensitive by default unless
proceeded by the <code class="ph codeph">--case=ignore</code> option.</dd>
<dt class="dt pt dlterm">-C '<var class="keyword varname">string</var>' | --columns='<var class="keyword varname">string</var>'</dt>
<dd class="dd pd">Selects specific columns from the log file. Specify the desired columns as a comma-delimited
              string of column numbers beginning with 1, where the second column from left is 2, the
              third is 3, and so on. <span class="ph">See "Viewing the Database Server Log
                Files" in the <em class="ph i">Greenplum Database Administrator Guide</em> for details about the
                log file format and for a list of the available columns and their associated
                number.</span></dd>
<dt class="dt pt dlterm">-f '<var class="keyword varname">string</var>' | --find='<var class="keyword varname">string</var>'</dt>
<dd class="dd pd">Finds the log entries containing the specified string.</dd>
<dt class="dt pt dlterm">-F '<var class="keyword varname">string</var>' | --nofind='<var class="keyword varname">string</var>'</dt>
<dd class="dd pd">Rejects the log entries containing the specified string.</dd>
<dt class="dt pt dlterm">-m <var class="keyword varname">regex</var> | --match=<var class="keyword varname">regex</var></dt>
<dd class="dd pd">Finds log entries that match the specified Python regular expression.
See <a class="xref" href="https://docs.python.org/library/re.html" target="_blank">https://docs.python.org/library/re.html</a>
for Python regular expression syntax.</dd>
<dt class="dt pt dlterm">-M <var class="keyword varname">regex</var> | --nomatch=<var class="keyword varname">regex</var></dt>
<dd class="dd pd">Rejects log entries that match the specified Python regular expression.
See <a class="xref" href="https://docs.python.org/library/re.html" target="_blank">https://docs.python.org/library/re.html</a>
for Python regular expression syntax.</dd>
<dt class="dt pt dlterm">-t | --trouble</dt>
<dd class="dd pd">Finds only the log entries that have <code class="ph codeph">ERROR:</code>, <code class="ph codeph">FATAL:</code>,
or <code class="ph codeph">PANIC:</code> in the first line.</dd>
</dl>
</div><div class="sectiondiv" id="topic1__section7"><strong class="ph b">Output Options</strong><dl class="dl parml"><dt class="dt pt dlterm">-n &lt;integer&gt; | --tail=&lt;integer&gt;</dt>
<dd class="dd pd">Limits the output to the last &lt;integer&gt; of qualifying log entries found.</dd>
<dt class="dt pt dlterm">-s &lt;offset&gt; [limit] | --slice=&lt;offset&gt; [limit]</dt>
<dd class="dd pd">From the list of qualifying log entries, returns the &lt;limit&gt; number of entries starting at
              the &lt;offset&gt; entry number, where an &lt;offset&gt; of zero (<code class="ph codeph">0</code>)
              denotes the first entry in the result set and an &lt;offset&gt; of any number greater
              than zero counts back from the end of the result set.</dd>
<dt class="dt pt dlterm">-o &lt;output_file&gt; | --out=&lt;output_file&gt;</dt>
<dd class="dd pd">Writes the output to the specified file or directory location instead
of <code class="ph codeph">STDOUT</code>. </dd>
<dt class="dt pt dlterm">-z 0-9 | --zip=0-9</dt>
<dd class="dd pd">Compresses the output file to the specified compression level using
<code class="ph codeph">gzip</code>, where <code class="ph codeph">0</code> is no compression and
<code class="ph codeph">9</code> is maximum compression. If you supply an output file
name ending in <code class="ph codeph">.gz</code>, the output file will be compressed
by default using maximum compression.</dd>
<dt class="dt pt dlterm">-a | --append</dt>
<dd class="dd pd">If the output file already exists, appends to the file instead of
overwriting it.</dd>
</dl>
</div><div class="sectiondiv" id="topic1__section8"><strong class="ph b">Input Options</strong><dl class="dl parml"><dt class="dt pt dlterm">input_file</dt>
<dd class="dd pd">The name of the input log file(s) to search through. If an input file is not supplied,
                <code class="ph codeph">gplogfilter</code> will use the <code class="ph codeph">$COORDINATOR_DATA_DIRECTORY</code>
              environment variable to locate the Greenplum Database coordinator log file.
              To read from standard input, use a dash (<code class="ph codeph">-</code>) as the input file
              name.</dd>
<dt class="dt pt dlterm">-u | --unzip</dt>
<dd class="dd pd">Uncompress the input file using <code class="ph codeph">gunzip</code>. If the input
file name ends in <code class="ph codeph">.gz</code>, it will be uncompressed by default.</dd>
<dt class="dt pt dlterm">--help</dt>
<dd class="dd pd">Displays the online help.</dd>
<dt class="dt pt dlterm">--version</dt>
<dd class="dd pd">Displays the version of this utility.</dd>
</dl>
</div></div>
<div class="section" id="topic1__section9"><h2 class="title sectiontitle">Examples</h2><p class="p">Display the last three error messages in the coordinator log file:</p>
<pre class="pre codeblock"><code>gplogfilter -t -n 3</code></pre><p class="p">Display all log messages in the coordinator log file timestamped in the last
10 minutes:</p>
<pre class="pre codeblock"><code>gplogfilter -d :10</code></pre><p class="p">Display log messages in the coordinator log file containing the string <code class="ph codeph">|con6
cmd11|</code>:</p>
<pre class="pre codeblock"><code>gplogfilter -f '|con6 cmd11|'</code></pre><p class="p">Using <a class="xref" href="gpssh.html#topic1">gpssh</a>, run
          <code class="ph codeph">gplogfilter</code> on the segment hosts and search for log messages in the
        segment log files containing the string <code class="ph codeph">con6</code> and save output to a file.</p>
<pre class="pre codeblock"><code>gpssh -f seg_hosts_file -e 'source 
/usr/local/greenplum-db/greenplum_path.sh ; gplogfilter -f 
con6 /gpdata/*/log/gpdb*.csv' &gt; seglog.out</code></pre></div>
<div class="section" id="topic1__section10"><h2 class="title sectiontitle">See Also</h2><p class="p"><a class="xref" href="gpssh.html#topic1">gpssh</a>, <a class="xref" href="gpscp.html#topic1">gpscp</a></p>
</div>
</div>
</body>
</html>