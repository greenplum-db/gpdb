<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="gpinitsystem" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>gpinitsystem</title>
</head>
<body id="topic1">

    <h1 class="title topictitle1" id="topic1__it20941">gpinitsystem</h1>

    <div class="body">
        <p class="p">Initializes a Greenplum Database system using configuration parameters specified in the
                <code class="ph codeph">gpinitsystem_config</code> file.</p>

        <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
            
            <pre class="pre codeblock"><code>gpinitsystem -c &lt;cluster_configuration_file&gt; 
            [-h &lt;hostfile_gpinitsystem&gt;]
            [-B &lt;parallel_processes&gt;] 
            [-p &lt;postgresql_conf_param_file&gt;]
            [-s &lt;standby_coordinator_host&gt;
                [-P &lt;standby_coordinator_port&gt;]
                [-S &lt;standby_coordinator_datadir&gt; | --standby_datadir=&lt;standby_coordinator_datadir&gt;]]
            [-m &lt;number&gt; | --max_connections=number&gt;]
            [-b &lt;size&gt; | --shared_buffers=&lt;size&gt;]
            [-n &lt;locale&gt; | --locale=&lt;locale&gt;] [--lc-collate=&lt;locale&gt;] 
            [--lc-ctype=&lt;locale&gt;] [--lc-messages=&lt;locale&gt;] 
            [--lc-monetary=&lt;locale&gt;] [--lc-numeric=&lt;locale&gt;] 
            [--lc-time=&lt;locale&gt;] [-e &lt;password&gt; | --su_password=&lt;password&gt;] 
            [--mirror-mode={group|spread}] [-a] [-q] [-l &lt;logfile_directory&gt;] [-D]
            [-I &lt;input_configuration_file&gt;]
            [-O &lt;output_configuration_file&gt;]

gpinitsystem -v | --version

gpinitsystem -? | --help</code></pre>
        </div>

        <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">The <code class="ph codeph">gpinitsystem</code> utility creates a Greenplum Database instance or
                writes an input configuration file using the values defined in a cluster
                configuration file and any command-line options that you provide. See <a class="xref" href="#topic1__section5">Initialization Configuration File Format</a> for more information
                about the configuration file. Before running this utility, make sure that you have
                installed the Greenplum Database software on all the hosts in the array.</p>

            <p class="p">With the <code class="ph codeph">&lt;-O output_configuration_file&gt;</code> option,
                    <code class="ph codeph">gpinitsystem</code> writes all provided configuration information to
                the specified output file. This file can be used with the <code class="ph codeph">-I</code> option
                to create a new cluster or re-create a cluster from a backed up configuration. See
                    <a class="xref" href="#topic1__section5">Initialization Configuration File Format</a> for more
                information. </p>

            <p class="p">In a Greenplum Database DBMS, each database instance (the coordinator instance and all
                segment instances) must be initialized across all of the hosts in the system in such
                a way that they can all work together as a unified DBMS. The
                    <code class="ph codeph">gpinitsystem</code> utility takes care of initializing the Greenplum
                coordinator and each segment instance, and configuring the system as a whole.</p>

            <p class="p">Before running <code class="ph codeph">gpinitsystem</code>, you must set the
                    <code class="ph codeph">$GPHOME</code> environment variable to point to the location of your
                Greenplum Database installation on the coordinator host and exchange SSH keys between all
                host addresses in the array using <code class="ph codeph">gpssh-exkeys</code>.</p>

            <p class="p">This utility performs the following tasks:</p>

            <ul class="ul">
                <li class="li" id="topic1__it147947">Verifies that the parameters in the configuration file are
                    correct.</li>

                <li class="li" id="topic1__it147948">Ensures that a connection can be established to each host address.
                    If a host address cannot be reached, the utility will exit.</li>

                <li class="li" id="topic1__it147949">Verifies the locale settings.</li>

                <li class="li" id="topic1__it147950">Displays the configuration that will be used and prompts the user
                    for confirmation.</li>

                <li class="li" id="topic1__it147951">Initializes the coordinator instance.</li>

                <li class="li" id="topic1__it147952">Initializes the standby coordinator instance (if specified).</li>

                <li class="li" id="topic1__it147953">Initializes the primary segment instances.</li>

                <li class="li" id="topic1__it147954">Initializes the mirror segment instances (if mirroring is
                    configured).</li>

                <li class="li" id="topic1__it147957">Configures the Greenplum Database system and checks for
                    errors.</li>

                <li class="li" id="topic1__it147961">Starts the Greenplum Database system.</li>

            </ul>

            <div class="note"><span class="notetitle">Note:</span> This utility uses secure shell (SSH) connections between systems to perform its
                tasks. In large Greenplum Database deployments, cloud deployments, or deployments
                with a large number of segments per host, this utility may exceed the host's maximum
                threshold for unauthenticated connections. Consider updating the SSH
                    <code class="ph codeph">MaxStartups</code> and <code class="ph codeph">MaxSessions</code> configuration
                parameters to increase this threshold. For more information about SSH configuration
                options, refer to the SSH documentation for your Linux distribution.</div>

        </div>

        <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Options</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">-a</dt>

                    <dd class="dd pd">Do not prompt the user for confirmation.</dd>

                
                
                    <dt class="dt pt dlterm">-B <var class="keyword varname">parallel_processes</var></dt>

                    <dd class="dd pd">The number of segments to create in parallel. If not specified, the utility
                        will start up to 4 parallel processes at a time.</dd>

                
                
                    <dt class="dt pt dlterm">-c <var class="keyword varname">cluster_configuration_file</var></dt>

                    <dd class="dd pd">Required. The full path and filename of the configuration file, which
                        contains all of the defined parameters to configure and initialize a new
                        Greenplum Database system. See <a class="xref" href="#topic1__section5">Initialization Configuration File Format</a> for a description of this file. You must provide either
                        the <code class="ph codeph">-c &lt;cluster_configuration_file&gt;</code> option or the
                            <code class="ph codeph">-I &lt;input_configuration_file&gt;</code> option to
                            <code class="ph codeph">gpinitsystem</code>. </dd>

                
                
                    <dt class="dt pt dlterm">-D</dt>

                    <dd class="dd pd">Sets log output level to debug.</dd>

                
                
                    <dt class="dt pt dlterm">-h <var class="keyword varname">hostfile_gpinitsystem</var></dt>

                    <dd class="dd pd">Optional. The full path and filename of a file that contains the host
                        addresses of your segment hosts. If not specified on the command line, you
                        can specify the host file using the <code class="ph codeph">MACHINE_LIST_FILE</code>
                        parameter in the <var class="keyword varname">gpinitsystem_config</var> file.</dd>

                
                
                    <dt class="dt pt dlterm">-I <var class="keyword varname">input_configuration_file</var></dt>

                    <dd class="dd pd">The full path and filename of an input configuration file, which defines the
                        Greenplum Database host systems, the coordinator instance and segment
                        instances on the hosts, using the <code class="ph codeph">QD_PRIMARY_ARRAY</code>,
                            <code class="ph codeph">PRIMARY_ARRAY</code>, and <code class="ph codeph">MIRROR_ARRAY</code>
                        parameters. The input configuration file is typically created by using
                            <code class="ph codeph">gpinitsystem</code> with the <code class="ph codeph">-O
                                <var class="keyword varname">output_configuration_file</var></code> option. Edit
                        those parameters in order to initialize a new cluster or re-create a cluster
                        from a backed up configuration. You must provide either the <code class="ph codeph">-c
                            &lt;cluster_configuration_file&gt;</code> option or the <code class="ph codeph">-I
                            &lt;input_configuration_file&gt;</code> option to
                            <code class="ph codeph">gpinitsystem</code>. </dd>

                
                
                    <dt class="dt pt dlterm"> -n <var class="keyword varname">locale</var> | --locale=<var class="keyword varname">locale</var>
                    </dt>

                    <dd class="dd pd">Sets the default locale used by Greenplum Database. If not specified, the 
                        default locale is <code class="ph codeph">en_US.utf8</code>. A locale identifier consists of a language
                        identifier and a region identifier, and optionally a character set encoding.
                        For example, <code class="ph codeph">sv_SE</code> is Swedish as spoken in Sweden,
                            <code class="ph codeph">en_US</code> is U.S. English, and <code class="ph codeph">fr_CA</code> is
                        French Canadian. If more than one character set can be useful for a locale,
                        then the specifications look like this: <code class="ph codeph">en_US.UTF-8</code> (locale
                        specification and character set encoding). On most systems, the command
                            <code class="ph codeph">locale</code> will show the locale environment settings and
                            <code class="ph codeph">locale -a</code> will show a list of all available
                        locales.</dd>

                
                
                    <dt class="dt pt dlterm">--lc-collate=<var class="keyword varname">locale</var></dt>

                    <dd class="dd pd">Similar to <code class="ph codeph">--locale</code>, but sets the locale used for collation
                        (sorting data). The sort order cannot be changed after Greenplum Database is
                        initialized, so it is important to choose a collation locale that is
                        compatible with the character set encodings that you plan to use for your
                        data. There is a special collation name of <code class="ph codeph">C</code> or
                            <code class="ph codeph">POSIX</code> (byte-order sorting as opposed to
                        dictionary-order sorting). The <code class="ph codeph">C</code> collation can be used with
                        any character encoding.</dd>

                
                
                    <dt class="dt pt dlterm">--lc-ctype=<var class="keyword varname">locale</var></dt>

                    <dd class="dd pd">Similar to <code class="ph codeph">--locale</code>, but sets the locale used for character
                        classification (what character sequences are valid and how they are
                        interpreted). This cannot be changed after Greenplum Database is
                        initialized, so it is important to choose a character classification locale
                        that is compatible with the data you plan to store in Greenplum
                        Database.</dd>

                
                
                    <dt class="dt pt dlterm">--lc-messages=<var class="keyword varname">locale</var></dt>

                    <dd class="dd pd">Similar to <code class="ph codeph">--locale</code>, but sets the locale used for messages
                        output by Greenplum Database. The current version of Greenplum Database does
                        not support multiple locales for output messages (all messages are in
                        English), so changing this setting will not have any effect.</dd>

                
                
                    <dt class="dt pt dlterm">--lc-monetary=<var class="keyword varname">locale</var></dt>

                    <dd class="dd pd">Similar to <code class="ph codeph">--locale</code>, but sets the locale used for
                        formatting currency amounts.</dd>

                
                
                    <dt class="dt pt dlterm">--lc-numeric=<var class="keyword varname">locale</var></dt>

                    <dd class="dd pd">Similar to <code class="ph codeph">--locale</code>, but sets the locale used for
                        formatting numbers.</dd>

                
                
                    <dt class="dt pt dlterm">--lc-time=<var class="keyword varname">locale</var></dt>

                    <dd class="dd pd">Similar to <code class="ph codeph">--locale</code>, but sets the locale used for
                        formatting dates and times.</dd>

                
                
                    <dt class="dt pt dlterm">-l <var class="keyword varname">logfile_directory</var></dt>

                    <dd class="dd pd">The directory to write the log file. Defaults to
                            <code class="ph codeph">~/gpAdminLogs</code>.</dd>

                
                
                    <dt class="dt pt dlterm"> -m <var class="keyword varname">number</var> | --max_connections=number</dt>

                    <dd class="dd pd">Sets the maximum number of client connections allowed to the coordinator. The
                        default is 250.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__output_config_file">-O <var class="keyword varname">output_configuration_file</var></dt>

                    <dd class="dd pd">Optional, used during new cluster initialization. This option writes the
                            <var class="keyword varname">cluster_configuration_file</var> information (used with -c)
                        to the specified <var class="keyword varname">output_configuration_file</var>. This file
                        defines the Greenplum Database members using the
                            <code class="ph codeph">QD_PRIMARY_ARRAY</code>, <code class="ph codeph">PRIMARY_ARRAY</code>, and
                            <code class="ph codeph">MIRROR_ARRAY</code> parameters. Use this file as a template
                        for the <code class="ph codeph">-I </code><var class="keyword varname">input_configuration_file</var>
                        option. See <a class="xref" href="#topic1__section6">Examples</a> for
                        more information. </dd>

                
                
                    <dt class="dt pt dlterm">-p <var class="keyword varname">postgresql_conf_param_file</var></dt>

                    <dd class="dd pd">Optional. The name of a file that contains <code class="ph codeph">postgresql.conf</code>
                        parameter settings that you want to set for Greenplum Database. These
                        settings will be used when the individual coordinator and segment instances are
                        initialized. You can also set parameters after initialization using the
                            <code class="ph codeph">gpconfig</code> utility.</dd>

                
                
                    <dt class="dt pt dlterm">-q</dt>

                    <dd class="dd pd">Run in quiet mode. Command output is not displayed on the screen, but is
                        still written to the log file.</dd>

                
                
                    <dt class="dt pt dlterm"> -b <var class="keyword varname">size</var> | --shared_buffers=<var class="keyword varname">size</var></dt>

                    <dd class="dd pd">Sets the amount of memory a Greenplum server instance uses for shared memory
                        buffers. You can specify sizing in kilobytes (kB), megabytes (MB) or
                        gigabytes (GB). The default is 125MB.</dd>

                
                
                    <dt class="dt pt dlterm">-s <var class="keyword varname">standby_coordinator_host</var></dt>

                    <dd class="dd pd">Optional. If you wish to configure a backup coordinator instance, specify the
                        host name using this option. The Greenplum Database software must already be
                        installed and configured on this host.</dd>

                
                
                    <dt class="dt pt dlterm">-P <var class="keyword varname">standby_coordinator_port</var></dt>

                    <dd class="dd pd">If you configure a standby coordinator instance with <code class="ph codeph">-s</code>, specify
                        its port number using this option. The default port is the same as the
                        coordinator port. To run the standby and coordinator on the same host, you must use
                        this option to specify a different port for the standby. The Greenplum
                        Database software must already be installed and configured on the standby
                        host.</dd>

                
                
                    <dt class="dt pt dlterm">-S <var class="keyword varname">standby_coordinator_datadir</var> |
                            --standby_dir=<var class="keyword varname">standby_coordinator_datadir</var></dt>

                    <dd class="dd pd">If you configure a standby coordinator host with <code class="ph codeph">-s</code>, use this
                        option to specify its data directory. If you configure a standby on the same
                        host as the coordinator instance, the coordinator and standby must have separate data
                        directories.</dd>

                
                
                    <dt class="dt pt dlterm"> -e <var class="keyword varname">superuser_password</var> |
                            --su_password=<var class="keyword varname">superuser_password</var></dt>

                    <dd class="dd pd">Use this option to specify the password to set for the Greenplum Database
                        superuser account (such as <code class="ph codeph">gpadmin</code>). If this option is not
                        specified, the default password <code class="ph codeph">gparray</code> is assigned to the
                        superuser account. You can use the <code class="ph codeph">ALTER ROLE</code> command to
                        change the password at a later time. <p class="p">Recommended security best
                            practices:</p>
<ul class="ul" id="topic1__ul_vnd_kt2_44">
                            <li class="li" id="topic1__it148039">Do not use the default password option for production
                                environments.</li>

                            <li class="li" id="topic1__it148040">Change the password immediately after
                                installation.</li>

                        </ul>
</dd>

                
                
                    <dt class="dt pt dlterm">--mirror-mode={group|spread}</dt>

                    <dd class="dd pd">Use this option to specify the placement of mirror segment instances on the
                        segment hosts. The default, <code class="ph codeph">group</code>, groups the mirror
                        segments for all of a host's primary segments on a single alternate host.
                            <code class="ph codeph">spread</code> spreads mirror segments for the primary segments
                        on a host across different hosts in the Greenplum Database array. Spreading
                        is only allowed if the number of hosts is greater than the number of segment
                        instances per host. See <a class="xref" href="../../admin_guide/highavail/topics/g-overview-of-segment-mirroring.html#topic3" target="_blank">Overview of Segment Mirroring</a> for information about Greenplum Database mirroring strategies. </dd>

                
                
                    <dt class="dt pt dlterm">-v | --version</dt>

                    <dd class="dd pd">Print the <code class="ph codeph">gpinitsystem</code> version and exit.</dd>

                
                
                    <dt class="dt pt dlterm">-? | --help</dt>

                    <dd class="dd pd">Show help about <code class="ph codeph">gpinitsystem</code> command line arguments, and
                        exit.</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Initialization Configuration File Format</h2>
            
            <p class="p"><code class="ph codeph">gpinitsystem</code> requires a cluster configuration file with the
                following parameters defined. An example initialization configuration file can be
                found in <code class="ph codeph">$GPHOME/docs/cli_help/gpconfigs/gpinitsystem_config</code>.</p>

            <p class="p">To avoid port conflicts between Greenplum Database and other applications, the
                Greenplum Database port numbers should not be in the range specified by the
                operating system parameter <code class="ph codeph">net.ipv4.ip_local_port_range</code>. For
                example, if <code class="ph codeph">net.ipv4.ip_local_port_range = 10000 65535</code>, you could
                set Greenplum Database base port numbers to these values.</p>

            <div class="p">
                <pre class="pre codeblock"><code>PORT_BASE = 6000
MIRROR_PORT_BASE = 7000</code></pre>
            </div>

            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">MACHINE_LIST_FILE</dt>

                    <dd class="dd pd"><strong class="ph b">Optional.</strong> Can be used in place of the <code class="ph codeph">-h</code> option.
                        This specifies the file that contains the list of the segment host address
                        names that comprise the Greenplum Database system. The coordinator host is
                        assumed to be the host from which you are running the utility and should not
                        be included in this file. If your segment hosts have multiple network
                        interfaces, then this file would include all addresses for the host. Give
                        the absolute path to the file.</dd>

                
                
                    <dt class="dt pt dlterm">SEG_PREFIX</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> This specifies a prefix that will be used to name the data
                        directories on the coordinator and segment instances. The naming convention for
                        data directories in a Greenplum Database system is
                            <var class="keyword varname">SEG_PREFIXnumber</var> where <var class="keyword varname">number</var>
                        starts with 0 for segment instances (the coordinator is always -1). So for
                        example, if you choose the prefix <code class="ph codeph">gpseg</code>, your coordinator
                        instance data directory would be named <code class="ph codeph">gpseg-1</code>, and the
                        segment instances would be named <code class="ph codeph">gpseg0</code>,
                            <code class="ph codeph">gpseg1</code>, <code class="ph codeph">gpseg2</code>,
                            <code class="ph codeph">gpseg3</code>, and so on.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__port_base">PORT_BASE</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> This specifies the base number by which primary segment
                        port numbers are calculated. The first primary segment port on a host is set
                        as <code class="ph codeph">PORT_BASE</code>, and then incremented by one for each
                        additional primary segment on that host. Valid values range from 1 through
                        65535.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__data_directory">DATA_DIRECTORY</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> This specifies the data storage location(s) where the
                        utility will create the primary segment data directories. The number of
                        locations in the list dictate the number of primary segments that will get
                        created per physical host (if multiple addresses for a host are listed in
                        the host file, the number of segments will be spread evenly across the
                        specified interface addresses). It is OK to list the same data storage area
                        multiple times if you want your data directories created in the same
                        location. The user who runs <code class="ph codeph">gpinitsystem</code> (for example, the
                            <code class="ph codeph">gpadmin</code> user) must have permission to write to these
                        directories. For example, this will create six primary segments per
                        host:</dd>

                    <dd class="dd pd ddexpand">
                        <pre class="pre codeblock"><code>declare -a DATA_DIRECTORY=(/data1/primary /data1/primary 
/data1/primary /data2/primary /data2/primary /data2/primary)</code></pre>
                    </dd>

                
                
                    <dt class="dt pt dlterm">MASTER_HOSTNAME</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> The host name of the coordinator instance. This host name must
                        exactly match the configured host name of the machine (run the
                            <code class="ph codeph">hostname</code> command to determine the correct
                        hostname).</dd>

                
                
                    <dt class="dt pt dlterm">MASTER_DIRECTORY</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> This specifies the location where the data directory will
                        be created on the coordinator host. You must make sure that the user who runs
                            <code class="ph codeph">gpinitsystem</code> (for example, the <code class="ph codeph">gpadmin</code>
                        user) has permissions to write to this directory.</dd>

                
                
                    <dt class="dt pt dlterm">MASTER_PORT</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> The port number for the coordinator instance. This is the port
                        number that users and client connections will use when accessing the
                        Greenplum Database system.</dd>

                
                
                    <dt class="dt pt dlterm">TRUSTED_SHELL</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> The shell the <code class="ph codeph">gpinitsystem</code> utility uses to
                        run commands on remote hosts. Allowed values are <code class="ph codeph">ssh</code>.
                        You must set up your trusted host environment before running the
                            <code class="ph codeph">gpinitsystem</code> utility (you can use
                            <code class="ph codeph">gpssh-exkeys</code> to do this).</dd>

                
                
                    <dt class="dt pt dlterm">ENCODING</dt>

                    <dd class="dd pd"><strong class="ph b">Required.</strong> The character set encoding to use. This character set must
                        be compatible with the <code class="ph codeph">--locale</code> settings used, especially
                            <code class="ph codeph">--lc-collate</code> and <code class="ph codeph">--lc-ctype</code>. Greenplum
                        Database supports the same character sets as PostgreSQL.</dd>

                
                
                    <dt class="dt pt dlterm">DATABASE_NAME</dt>

                    <dd class="dd pd"><strong class="ph b">Optional.</strong> The name of a Greenplum Database database to create after
                        the system is initialized. You can always create a database later using the
                            <code class="ph codeph">CREATE DATABASE</code> command or the
                            <code class="ph codeph">createdb</code> utility.</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__mirror_port_base">MIRROR_PORT_BASE</dt>

                    <dd class="dd pd"><strong class="ph b">Optional.</strong> This specifies the base number by which mirror segment port
                        numbers are calculated. The first mirror segment port on a host is set as
                            <code class="ph codeph">MIRROR_PORT_BASE</code>, and then incremented by one for each
                        additional mirror segment on that host. Valid values range from 1 through
                        65535 and cannot conflict with the ports calculated by
                            <code class="ph codeph">PORT_BASE</code>.</dd>

                
                
                    <dt class="dt pt dlterm">MIRROR_DATA_DIRECTORY</dt>

                    <dd class="dd pd"><strong class="ph b">Optional.</strong> This specifies the data storage location(s) where the
                        utility will create the mirror segment data directories. There must be the
                        same number of data directories declared for mirror segment instances as for
                        primary segment instances (see the <code class="ph codeph">DATA_DIRECTORY</code>
                        parameter). The user who runs <code class="ph codeph">gpinitsystem</code> (for example,
                        the <code class="ph codeph">gpadmin</code> user) must have permission to write to these
                        directories. For example:</dd>

                    <dd class="dd pd ddexpand">
                        <pre class="pre codeblock"><code>declare -a MIRROR_DATA_DIRECTORY=(/data1/mirror 
/data1/mirror /data1/mirror /data2/mirror /data2/mirror 
/data2/mirror)</code></pre>
                    </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__array_params">QD_PRIMARY_ARRAY, PRIMARY_ARRAY, MIRROR_ARRAY</dt>

                    <dd class="dd pd"><strong class="ph b">Required</strong> when using <code class="ph codeph">input_configuration file</code> with
                            <code class="ph codeph">-I</code> option. These parameters specify the Greenplum
                        Database coordinator host, the primary segment, and the mirror segment hosts
                        respectively. During new cluster initialization, use the
                            <code class="ph codeph">gpinitsystem</code>
                        <code class="ph codeph">-O <var class="keyword varname">output_configuration_file</var></code> to populate
                            <code class="ph codeph">QD_PRIMARY_ARRAY</code>, <code class="ph codeph">PRIMARY_ARRAY</code>,
                            <code class="ph codeph">MIRROR_ARRAY</code>. </dd>

                    <dd class="dd pd ddexpand">To initialize a new cluster or re-create a cluster from a backed up
                        configuration, edit these values in the input configuration file used with
                        the <code class="ph codeph">gpinitsystem</code>
                        <code class="ph codeph">-I <var class="keyword varname">input_configuration_file</var></code> option. Use
                        one of the following formats to specify the host
                        information:<pre class="pre codeblock"><code>&lt;hostname&gt;~&lt;address&gt;~&lt;port&gt;~&lt;data_directory&gt;/&lt;seg_prefix&lt;segment_id&gt;~&lt;dbid&gt;~&lt;content_id&gt;</code></pre>or
                        <pre class="pre codeblock"><code>&lt;host&gt;~&lt;port&gt;~&lt;data_directory&gt;/&lt;seg_prefix&lt;segment_id&gt;~&lt;dbid&gt;~&lt;content_id&gt;</code></pre></dd>

                    <dd class="dd pd ddexpand">The first format populates the <code class="ph codeph">hostname</code> and
                            <code class="ph codeph">address</code> fields in the
                            <code class="ph codeph">gp_segment_configuration</code> catalog table with the
                            <var class="keyword varname">hostname</var> and <var class="keyword varname">address</var> values
                        provided in the input configuration file. The second format populates
                            <code class="ph codeph">hostname</code> and <code class="ph codeph">address</code> fields with the
                        same value, derived from <var class="keyword varname">host</var>.</dd>

                    <dd class="dd pd ddexpand">The Greenplum Database coordinator always uses the value -1 for the segment
                        ID and content ID. For example, <var class="keyword varname">seg_prefix&lt;segment_id&gt;</var>
                        and <var class="keyword varname">dbid</var> values for <code class="ph codeph">QD_PRIMARY_ARRAY</code> use
                            <code class="ph codeph">-1</code> to indicate the coordinator
                        instance:<pre class="pre codeblock"><code>QD_PRIMARY_ARRAY=cdw~cdw~5432~/gpdata/coordinator/gpseg-1~1~-1
declare -a PRIMARY_ARRAY=(
sdw1~sdw1~40000~/gpdata/data1/gpseg0~2~0
sdw1~sdw1~40001~/gpdata/data2/gpseg1~3~1
sdw2~sdw2~40000~/gpdata/data1/gpseg2~4~2
sdw2~sdw2~40001~/gpdata/data2/gpseg3~5~3
)
declare -a MIRROR_ARRAY=(
sdw2~sdw2~50000~/gpdata/mirror1/gpseg0~6~0
sdw2~sdw2~50001~/gpdata/mirror2/gpseg1~7~1
sdw1~sdw1~50000~/gpdata/mirror1/gpseg2~8~2
sdw1~sdw1~50001~/gpdata/mirror2/gpseg3~9~3
)</code></pre></dd>

                    <dd class="dd pd ddexpand">To re-create a cluster using a known Greenplum Database system
                        configuration, you can edit the segment and content IDs to match the values
                        of the system.</dd>

                
                
                    <dt class="dt pt dlterm">HEAP_CHECKSUM</dt>

                    <dd class="dd pd"><strong class="ph b">Optional.</strong> This parameter specifies if checksums are enabled for heap
                        data. When enabled, checksums are calculated for heap storage in all
                        databases, enabling Greenplum Database to detect corruption in the I/O
                        system. This option is set when the system is initialized and cannot be
                        changed later.</dd>

                    <dd class="dd pd ddexpand">The <code class="ph codeph">HEAP_CHECKSUM</code> option is on by default and turning it
                        off is strongly discouraged. If you set this option to off, data corruption
                        in storage can go undetected and make recovery much more difficult.</dd>

                    <dd class="dd pd ddexpand">To determine if heap checksums are enabled in a Greenplum Database system,
                        you can query the <code class="ph codeph">data_checksums</code> server configuration
                        parameter with the <code class="ph codeph">gpconfig</code> management
                        utility:<pre class="pre codeblock"><code>$ gpconfig -s data_checksums</code></pre></dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__hba_hostnames">HBA_HOSTNAMES</dt>

                    <dd class="dd pd"><strong class="ph b">Optional.</strong> This parameter controls whether
                            <code class="ph codeph">gpinitsystem</code> uses IP addresses or host names in the
                            <code class="ph codeph">pg_hba.conf</code> file when updating the file with addresses
                        that can connect to Greenplum Database. The default value is
                            <code class="ph codeph">0</code>, the utility uses IP addresses when updating the
                        file. When initializing a Greenplum Database system, specify
                            <code class="ph codeph">HBA_HOSTNAMES=1</code> to have the utility use host names in
                        the <code class="ph codeph">pg_hba.conf</code> file. </dd>

                    <dd class="dd pd ddexpand">For information about how Greenplum Database resolves host names in the
                            <code class="ph codeph">pg_hba.conf</code> file, see <a class="xref" href="../../admin_guide/client_auth.html#topic1" target="_blank">Configuring Client Authentication</a>.</dd>

                
            </dl>

        </div>

        <div class="section"><h2 class="title sectiontitle">Specifying Hosts using Hostnames or IP Addresses</h2>
            
            <div class="p">When initializing a Greenplum Database system with <code class="ph codeph">gpinitsystem</code>, you
                can specify segment hosts using either hostnames or IP addresses. For example, you
                can use hostnames or IP addresses in the file specified with the <code class="ph codeph">-h</code>
                    option.<ul class="ul" id="topic1__ul_ijf_tvq_bmb">
                    <li class="li">If you specify a hostname, the resolution of the hostname to an IP address
                        should be done locally for security. For example, you should use entries in
                        a local <code class="ph codeph">/etc/hosts</code> file to map a hostname to an IP address.
                        The resolution of a hostname to an IP address should not be performed by an
                        external service such as a public DNS server. You must stop the Greenplum
                        system before you change the mapping of a hostname to a different IP
                        address.</li>

                    <li class="li">If you specify an IP address, the address should not be changed after the
                        initial configuration. When segment mirroring is enabled, replication from
                        the primary to the mirror segment will fail if the IP address changes from
                        the configured value. For this reason, you should use a hostname when
                        initializing a Greenplum Database system unless you have a specific
                        requirement to use IP addresses.</li>

                </ul>
</div>

            <p class="p">When initializing the Greenplum Database system, <code class="ph codeph">gpinitsystem</code> uses
                the initialization information to populate the <a class="xref" href="../../ref_guide/system_catalogs/gp_segment_configuration.html">gp_segment_configuration</a> catalog table and adds hosts to the
                    <code class="ph codeph">pg_hba.conf</code> file. By default, the host IP address is added to
                the file. Specify the <code class="ph codeph">gpinitsystem</code> configuration file parameter
                    <a class="xref" href="#topic1__hba_hostnames">HBA_HOSTNAMES</a>=1 to add
                hostnames to the file.</p>

            <p class="p">Greenplum Database uses the <code class="ph codeph">address</code> value of the
                    <code class="ph codeph">gp_segment_configuration</code> catalog table when looking up host
                systems for Greenplum interconnect (internal) communication between the coordinator and
                segment instances and between segment instances, and for other internal
                communication.</p>

        </div>

        <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
            
            <p class="p">Initialize a Greenplum Database system by supplying a cluster configuration file and
                a segment host address file, and set up a spread mirroring
                    (<code class="ph codeph">--mirror-mode=spread</code>) configuration:</p>

            <pre class="pre codeblock"><code>$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem --mirror-mode=spread</code></pre>
            <p class="p">Initialize a Greenplum Database system and set the superuser remote password:</p>

            <pre class="pre codeblock"><code>$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem --su-password=mypassword</code></pre>
            <p class="p">Initialize a Greenplum Database system with an optional standby coordinator host:</p>

            <pre class="pre codeblock"><code>$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem -s host09</code></pre>
            <p class="p">Initialize a Greenplum Database system and write the provided configuration to an
                output file, for example <code class="ph codeph">cluster_init.config</code>:</p>

            <pre class="pre codeblock"><code>$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem -O cluster_init.config</code></pre>
            <p class="p">The output file uses the <code class="ph codeph">QD_PRIMARY_ARRAY</code> and
                    <code class="ph codeph">PRIMARY_ARRAY</code> parameters to define coordinator and segment
                hosts:</p>

            <pre class="pre codeblock"><code>TRUSTED_SHELL=ssh
CHECK_POINT_SEGMENTS=8
ENCODING=UNICODE
SEG_PREFIX=gpseg
HEAP_CHECKSUM=on
HBA_HOSTNAMES=0
QD_PRIMARY_ARRAY=cdw~cdw.local~5433~/data/coordinator1/gpseg-1~1~-1
declare -a PRIMARY_ARRAY=(
cdw~cdw.local~6001~/data/primary1/gpseg0~2~0
)
declare -a MIRROR_ARRAY=(
cdw~cdw.local~7001~/data/mirror1/gpseg0~3~0
)</code></pre>
            <p class="p">Initialize a Greenplum Database using an input configuration file (a file that
                defines the Greenplum Database cluster) using <code class="ph codeph">QD_PRIMARY_ARRAY</code> and
                    <code class="ph codeph">PRIMARY_ARRAY</code> parameters:</p>

            <pre class="pre codeblock"><code>$ gpinitsystem -I cluster_init.config</code></pre>
            <p class="p">The following example uses a host system configured with multiple NICs. If host
                systems are configured with multiple NICs, you can initialize a Greenplum Database
                system to use each NIC as a Greenplum host system. You must ensure that the host
                systems are configured with sufficient resources to support all the segment
                instances being added to the host. Also, if high availability is enabled, you must
                ensure that the Greenplum system configuration supports failover if a host system
                fails. For information about Greenplum Database mirroring schemes, see <a class="xref" href="../../best_practices/ha.html#topic_ngz_qf4_tt" target="_blank">../../best_practices/ha.html#topic_ngz_qf4_tt</a>.</p>

            <div class="p">For this simple coordinator and segment instance configuration, the host system
                    <code class="ph codeph">gp6m</code> is configured with two NICs <code class="ph codeph">gp6m-1</code> and
                    <code class="ph codeph">gp6m-2</code>. In the configuration, the <a class="xref" href="#topic1__array_params">QD_PRIMARY_ARRAY</a> parameter
                defines the coordinator segment using <code class="ph codeph">gp6m-1</code>. The <a class="xref" href="#topic1__array_params">PRIMARY_ARRAY</a> and <a class="xref" href="#topic1__array_params">MIRROR_ARRAY</a> parameters use
                    <code class="ph codeph">gp6m-2</code> to define a primary and mirror segment instance.
                <pre class="pre codeblock"><code>QD_PRIMARY_ARRAY=gp6m~gp6m-1~5432~/data/coordinator/gpseg-1~1~-1
declare -a PRIMARY_ARRAY=(
gp6m~gp6m-2~40000~/data/data1/gpseg0~2~0
gp6s~gp6s~40000~/data/data1/gpseg1~3~1
)
declare -a MIRROR_ARRAY=(
gp6s~gp6s~50000~/data/mirror1/gpseg0~4~0
gp6m~gp6m-2~50000~/data/mirror1/gpseg1~5~1
)</code></pre></div>

        </div>

        <div class="section" id="topic1__section7"><h2 class="title sectiontitle">See Also</h2><a class="xref" href="gpssh-exkeys.html#topic1">gpssh-exkeys</a>, <a class="xref" href="gpdeletesystem.html#topic1">gpdeletesystem</a>, <a class="xref" href="../../install_guide/init_gpdb.html">Initializing Greenplum Database</a>.</div>

    </div>

</body>
</html>