<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="gpreload" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>gpreload</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="topic1__pj138418">gpreload</h1>

  <div class="body">
    <p class="p">Reloads Greenplum Database table data sorting the data based on specified columns. </p>

    <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2><pre class="pre codeblock"><code>gpreload -d &lt;database&gt; [-p &lt;port&gt;] {-t | --table-file} &lt;path_to_file&gt; [-a]

gpreload -h 

gpreload --version</code></pre></div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2><p class="p">The <code class="ph codeph">gpreload</code> utility reloads table data with column data sorted. For tables that
        were created with the table storage option <code class="ph codeph">appendoptimized=TRUE</code> and compression
        enabled, reloading the data with sorted data can improve table compression. You specify a
        list of tables to be reloaded and the table columns to be sorted in a text file. </p>
<p class="p">Compression is improved by sorting data
        when the data in the column has a relatively low number of distinct values when compared to
        the total number of rows.</p>
<p class="p">For a table being reloaded, the order of the columns to be sorted might affect compression. The
        columns with the fewest distinct values should be listed first. For example, listing state
        then city would generally result in better compression than listing city then state. </p>
<pre class="pre codeblock"><code>public.cust_table: state, city
public.cust_table: city, state</code></pre><p class="p">For
        information about the format of the file used with <code class="ph codeph">gpreload</code>, see the
          <code class="ph codeph">--table-file</code> option.</p>
</div>

    <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Notes</h2><p class="p">To improve reload performance, indexes on tables
        being reloaded should be removed before reloading the data. </p>
<p class="p">Running the
          <code class="ph codeph">ANALYZE</code> command after reloading table data might query performance
        because of a change in the data distribution of the reloaded data. </p>

      <p class="p">For each table, the utility copies table data to a temporary table, truncates the existing
        table data, and inserts data from the temporary table to the table in the specified sort
        order. Each table reload is performed in a single transaction.</p>

      <p class="p">For a partitioned table, you can reload the data of a leaf child partition. However, data
        is inserted from the root partition table, which acquires a <code class="ph codeph">ROW EXCLUSIVE</code>
        lock on the entire table.</p>
</div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Options</h2><dl class="dl parml">
        
          <dt class="dt pt dlterm">-a (do not prompt)</dt>

          <dd class="dd pd">Optional. If specified, the <code class="ph codeph">gpreload</code> utility does not prompt the user
            for confirmation. </dd>

        
        
          <dt class="dt pt dlterm">-d <var class="keyword varname">database</var></dt>

          <dd class="dd pd">The database that contains the tables to be reloaded. The <code class="ph codeph">gpreload</code>
            utility connects to the database as the user running the utility. </dd>

        
        
          <dt class="dt pt dlterm">-p <var class="keyword varname">port</var></dt>

          <dd class="dd pd">The Greenplum Database coordinator port. If not specified, the value of the
              <code class="ph codeph">PGPORT</code> environment variable is used. If the value is not available,
            an error is returned. </dd>

        
        
          <dt class="dt pt dlterm">{-t | --table-file } <var class="keyword varname">path_to_file</var></dt>

          <dd class="dd pd">The location and name of file containing list of schema qualified table names to
            reload and the column names to reorder from the Greenplum Database. Only user defined
            tables are supported. Views or system catalog tables are not supported.</dd>

          <dd class="dd pd ddexpand">If indexes are defined on table listed in the file, <code class="ph codeph">gpreload</code> prompts
            to continue.</dd>

          <dd class="dd pd ddexpand">Each line specifies a table name and the list of columns to sort. This is the format
            of each line in the file:</dd>

          <dd class="dd pd ddexpand"><pre class="pre codeblock"><code>schema.table_name: column [desc] [, column2 [desc] ... ]</code></pre></dd>

          <dd class="dd pd ddexpand">The table name is followed by a colon ( : ) and then at least one column name. If you
            specify more than one column, separate the column names with a comma. The columns are
            sorted in ascending order. Specify the keyword <code class="ph codeph">desc</code> after the column
            name to sort the column in descending order. </dd>

          <dd class="dd pd ddexpand">Wildcard characters are not supported.</dd>

          <dd class="dd pd ddexpand">If there are errors in the file, <code class="ph codeph">gpreload</code> reports the first error and
            exits. No data is reloaded. </dd>

          <dd class="dd pd ddexpand">The following example reloads three
            tables:<pre class="pre codeblock"><code>public.clients: region, state, rep_id desc
public.merchants: region, state
test.lineitem: group, assy, whse </code></pre></dd>

          <dd class="dd pd ddexpand">In the first table <code class="ph codeph">public.clients</code>, the data in the
              <code class="ph codeph">rep_id</code> column is sorted in descending order. The data in the other
            columns are sorted in ascending order. </dd>

        
        
          <dt class="dt pt dlterm">--version (show utility version)</dt>

          <dd class="dd pd">Displays the version of this utility.</dd>

        
        
          <dt class="dt pt dlterm">-? (help)</dt>

          <dd class="dd pd">Displays the online help.</dd>

        
      </dl>
</div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Example</h2><p class="p">This example command reloads the tables in the
        database <code class="ph codeph">mytest</code> that are listed in the file
          <code class="ph codeph">data-tables.txt</code>.
      </p>
<pre class="pre codeblock"><code>gpreload -d mytest --table-file data-tables.txt</code></pre></div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">See Also</h2><p class="p"><code class="ph codeph">CREATE TABLE</code> in the
          <em class="ph i">Greenplum Database Reference Guide</em></p>
</div>

  </div>

</body>
</html>