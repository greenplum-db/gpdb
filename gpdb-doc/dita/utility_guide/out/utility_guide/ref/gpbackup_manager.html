<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="gpbackup_manager" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>gpbackup_manager</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="ariaid-title1">gpbackup_manager</h1>

  <div class="body">
    <div class="p">Display information about existing backups, delete existing backups, or encrypt passwords for
      secure storage in plugin configuration files. <div class="note"><span class="notetitle">Note:</span> <code class="ph codeph">gpbackup_manager</code> is
        available only with the commercial release of Tanzu Greenplum Backup and Restore.</div>
</div>

    <div class="section"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock"><code>gpbackup_manager [&lt;command&gt;]</code></pre>
      <p class="p">where <em class="ph i">command</em> is: </p>

      <pre class="pre codeblock"><code>delete-backup &lt;timestamp&gt; [--plugin-config &lt;config-file&gt;]
| display-report &lt;timestamp&gt;  
| encrypt-password --plugin-config&gt; &lt;config-file&gt;  
| list-backups
| help [<var class="keyword varname">command</var>]</code></pre>
    </div>

    <div class="section"><h2 class="title sectiontitle">Commands</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm"><code class="ph codeph">delete-backup <var class="keyword varname">timestamp</var></code></dt>

          <dd class="dd pd">Deletes the backup set with the specified timestamp.</dd>

        
        
          <dt class="dt pt dlterm"><code class="ph codeph">display-report <var class="keyword varname">timestamp</var></code></dt>

          <dd class="dd pd">Displays the backup report for a specified timestamp.</dd>

        
        
          <dt class="dt pt dlterm"><code class="ph codeph">encrypt-password</code></dt>

          <dd class="dd pd">Encrypts plain-text passwords for storage in the DD Boost plugin configuration
            file.</dd>

        
        
          <dt class="dt pt dlterm"><code class="ph codeph">list-backups</code></dt>

          <dd class="dd pd">Displays a list of backups that have been taken. If the backup history file does not
            exist, the command exits with an error message. See <a class="xref" href="#topic1__table_yls_rgw_g3b">Table 1</a> for a description of the columns in
            this list.</dd>

        
        
          <dt class="dt pt dlterm"><code class="ph codeph">help &lt;command&gt;</code></dt>

          <dd class="dd pd">Displays a help message for the specified command.</dd>

        
      </dl>

    </div>

    <div class="section"><h2 class="title sectiontitle">Options</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm">--plugin-config <var class="keyword varname">config-file</var></dt>

          <dd class="dd pd">The <code class="ph codeph">delete-backup</code> command requires this option if the backup Is
            stored in s3 or a Data Domain system. The <code class="ph codeph">encrypt-password</code> command
            requires this option.</dd>

        
        
          <dt class="dt pt dlterm">-h | --help </dt>

          <dd class="dd pd">Displays a help message for the <code class="ph codeph">gpbackup_manager</code> command. For help on
            a specific <code class="ph codeph">gpbackup_manager</code> command, enter <code class="ph codeph">gpbackup_manager
              help &lt;command&gt;</code>. For
            example:<pre class="pre codeblock"><code>$ gpbackup_manager help encrypt-password</code></pre></dd>

        
      </dl>

    </div>

    <div class="section"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p">The <code class="ph codeph">gpbackup_manager</code> utility manages backup sets created using the <a class="xref" href="gpbackup.html#topic1"><code class="ph codeph">gpbackup</code></a> utility. You can list backups,
        display a report for a backup, and delete a backup. <code class="ph codeph">gpbackup_manager</code> can
        also encrypt passwords to store in a DD Boost plugin configuration file.</p>

      <p class="p">Greenplum Database must be running to use the <code class="ph codeph">gpbackup_manager</code>
        utility.</p>

      <p class="p">Backup history is saved on the Greenplum Database coordinator host in the file
          <code class="ph codeph">$COORDINATOR_DATA_DIRECTORY/gpbackup_history.yaml</code>. If no backups have
        been created yet, or if the backup history has been deleted,
          <code class="ph codeph">gpbackup_manager</code> commands that depend on the file will display an error
        message and exit. If the backup history contains invalid YAML syntax, a yaml error message
        is displayed.</p>

      <p class="p">Versions of <code class="ph codeph">gpbackup</code> earlier than v1.13.0 did not save the backup duration
        in the backup history file. The <code class="ph codeph">list-backups</code> command duration column is
        empty for these backups.</p>

      <p class="p">The <code class="ph codeph">encrypt-password</code> command is used to encrypt Data Domain user passwords
        that are saved in a DD Boost plug-In configuration file. To use this option, the
          <code class="ph codeph">pgcrypto</code> extension must be enabled in the Greenplum Database
          <code class="ph codeph">postgres</code> database. See the Tanzu Greenplum Backup and Restore
        installation instructions for help installing <code class="ph codeph">pgcrypto</code>.</p>

      <p class="p">The <code class="ph codeph">encrypt-password</code> command prompts you to enter and then re-enter the
        password to be encrypted. To maintain password secrecy, characters entered are echoed as
        asterisks. If replication is enabled in the specified DD Boost configuration file, the
        command also prompts for a password for the remote Data Domain account. You must then copy
        the output of the command into the DD Boost configuration file.</p>

    </div>

    <p class="p">The following table describes the contents of the columns in the list that is output by the
        <code class="ph codeph">gpbackup_manager list-backups</code> command.</p>

    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic1__table_yls_rgw_g3b" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>Backup List Report</span></caption><colgroup><col style="width:33.33333333333333%" /><col style="width:66.66666666666666%" /></colgroup><thead class="thead" style="text-align:left;">
          <tr class="row">
            <th class="entry cellrowborder" style="vertical-align:top;" id="d66071e244">Column</th>

            <th class="entry cellrowborder" style="vertical-align:top;" id="d66071e247">Description</th>

          </tr>

        </thead>
<tbody class="tbody">
          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">timestamp</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">Timestamp value (<code class="ph codeph">YYYYMMDDHHMMSS</code>) that specifies the time the
              backup was taken.</td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">date</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">Date the backup was taken.</td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">database</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">Name of the database backed up (specified on the <code class="ph codeph">gpbackup</code>
              command line with the <code class="ph codeph">--dbname</code> option).</td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">type</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">Which classes of data are included in the backup. Can be one of the following: <ul class="sl simple">
                <li class="sli"><strong class="ph b">full</strong> - contains all global and local metadata, and user data for the
                  database. This kind of backup can be the base for an incremental backup. Depending
                  on the <code class="ph codeph">gpbackup</code> options specified, some objects could have been
                  filtered from the backup.</li>

                <li class="sli"><strong class="ph b">incremental</strong> – contains all global and local metadata, and user data
                  changed since a previous <strong class="ph b">full</strong> backup.</li>

                <li class="sli"><strong class="ph b">metadata-only</strong> – contains only the global and local metadata for the
                  database. Depending on the <code class="ph codeph">gpbackup</code> options specified, some
                  objects could have been filtered from the backup.</li>

                <li class="sli"><strong class="ph b">data-only</strong> – contains only user data from the database. Depending on the
                    <code class="ph codeph">gpbackup</code> options specified, some objects could have been
                  filtered from the backup.</li>

              </ul>

            </td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">object filtering</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">The object filtering options that were specified at least once on the
                <code class="ph codeph">gpbackup</code> command line, or blank if no filtering operations were
              used. To see the object filtering details for a specific backup, run the
                <code class="ph codeph">gpbackup_manager report</code> command for the backgit st<ul class="sl simple">
                <li class="sli"><strong class="ph b">include-schema</strong> – at least one <code class="ph codeph">--include-schema</code> option
                  was specified.</li>

                <li class="sli"><strong class="ph b">exclude-schema</strong> – at least one <code class="ph codeph">--exclude-schema</code> option
                  was specified.</li>

                <li class="sli"><strong class="ph b">include-table</strong> – at least one <code class="ph codeph">--include-table</code> option was
                  specified.</li>

                <li class="sli"><strong class="ph b">exclude-table</strong> – at least one <code class="ph codeph">--exclude-table</code> option was
                  specified.</li>

              </ul>
</td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">plugin</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">The name of the binary plugin file that was used to configure the backup
              destination, excluding path information.</td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">duration</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">The amount of time (<code class="ph codeph">hh:mm:ss</code> format) taken to complete the
              backup.</td>

          </tr>

          <tr class="row">
            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e244 ">date deleted</td>

            <td class="entry cellrowborder" style="vertical-align:top;" headers="d66071e247 ">The date the backup was deleted, or blank if the backup still exists. </td>

          </tr>

        </tbody>
</table>
</div>

    <div class="section"><h2 class="title sectiontitle">Examples</h2>
      
      <ol class="ol">
        <li class="li">Display a list of the existing backups.
          <pre class="pre codeblock"><code>gpadmin@cdw:$ gpbackup_manager list-backups
  timestamp        date                       database   type            object filtering   plugin   duration   date deleted
  20190719092809   Fri Jul 19 2019 09:28:09   sales      full            include-schema              01:49:38   Fri Jul 19 2019 09:30:34
  20190719092716   Fri Jul 19 2019 09:27:16   sales      full            exclude-schema              01:38:45
  20190719092609   Fri Jul 19 2019 09:26:09   sales      data-only                                   01:07:22
  20190719092557   Fri Jul 19 2019 09:25:57   sales      metadata-only                               00:00:19
  20190719092530   Fri Jul 19 2019 09:25:30   sales      full                                        01:50:27
</code></pre></li>

        <li class="li">Display the backup report for the backup with timestamp
          20190612154608.<pre class="pre codeblock"><code>$ gpbackup_manager display-report 20190612154608
  
Greenplum Database Backup Report
  
Timestamp Key: 20190612154608
GPDB Version: 5.14.0+dev.8.gdb327b2a3f build commit:db327b2a3f6f2b0673229e9aa164812e3bb56263
gpbackup Version: 1.11.0
Database Name: sales
Command Line: gpbackup --dbname sales
Compression: gzip
Plugin Executable: None
Backup Section: All Sections
Object Filtering: None
Includes Statistics: No
Data File Format: Multiple Data Files Per Segment
Incremental: False
Start Time: 2019-06-12 15:46:08
End Time: 2019-06-12 15:46:53
Duration: 0:00:45
  
Backup Status: Success
Database Size: 3306 MB
  
Count of Database Objects in Backup:
Aggregates                   12
Casts                        4
Constraints                  0
Conversions                  0
Database GUCs                0
Extensions                   0
Functions                    0
Indexes                      0
Operator Classes             0
Operator Families            1
Operators                    0
Procedural Languages         1
Protocols                    1
Resource Groups              2
Resource Queues              6
Roles                        859
Rules                        0
Schemas                      185
Sequences                    207
Tables                       431
Tablespaces                  0
Text Search Configurations   0
Text Search Dictionaries     0
Text Search Parsers          0
Text Search Templates        0
Triggers                     0
Types                        2
Views                        0</code></pre></li>

        <li class="li">Delete the local backup with timestamp
          20190620145126.<pre class="pre codeblock"><code>$ gpbackup_manager delete-backup 20190620145126

Are you sure you want to delete-backup 20190620145126? (y/n)<strong class="ph b">y</strong>
Deletion of 20190620145126 in progress.

Deletion of 20190620145126 complete.</code></pre></li>

        <li class="li">Delete a backup stored on a Data Domain system. The DD Boost plugin configuration file
          must be specified with the <code class="ph codeph">--plugin-config</code>
          option.<pre class="pre codeblock"><code>$ gpbackup_manager delete-backup 20190620160656 --plugin-config ~/ddboost_config.yaml

Are you sure you want to delete-backup 20190620160656? (y/n)<strong class="ph b">y</strong>
Deletion of 20190620160656 in progress.
      
Deletion of 20190620160656 done.</code></pre></li>

        <li class="li">Encrypt a password. A DD Boost plugin configuration file must be specified with the
            <code class="ph codeph">--plugin-config</code>
          option.<pre class="pre codeblock"><code>$ gpbackup_manager encrypt-password --plugin-config ~/ddboost_rep_on_config.yaml
          
Please enter your password ******
Please verify your password ******
Please enter your remote password ******
Please verify your remote password ******
          
Please copy/paste these lines into the plugin config file:
          
password: "c30d04090302a0ff861b823d71b079d23801ac367a74a1a8c088ed53beb62b7e190b7110277ea5b51c88afcba41857d2900070164db5f3efda63745dfffc7f2026290a31e1a2035dac"
password_encryption: "on"
remote_password: "c30d04090302c764fd06bfa1dade62d2380160a8f1e4d1ff0a4bb25a542fb1d31c7a19b98e9b2f00e7b1cf4811c6cdb3d54beebae67f605e6a9c4ec9718576769b20e5ebd0b9f53221"
remote_password_encryption: "on"
</code></pre></li>

      </ol>

    </div>

    <div class="section" id="topic1__section9"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p">
        <a class="xref" href="gprestore.html">gprestore</a>, <a class="xref" href="../../admin_guide/managing/backup-gpbackup.html" target="_blank">Parallel Backup with gpbackup and gprestore</a> and <a class="xref" href="../../admin_guide/managing/backup-s3-plugin.html" target="_blank">Using the S3 Storage Plugin with gpbackup and gprestore</a></p>

    </div>

  </div>

</body>
</html>