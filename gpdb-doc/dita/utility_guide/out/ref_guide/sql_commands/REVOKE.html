<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="REVOKE" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>REVOKE</title>
</head>
<body id="topic1">
<h1 class="title topictitle1" id="topic1__ec20941">REVOKE</h1>
<div class="body"><p class="p" id="topic1__sql_command_desc">Removes access privileges.</p>
<div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2><pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>REVOKE [GRANT OPTION FOR] { {SELECT | INSERT | UPDATE | DELETE 
       | REFERENCES | TRIGGER | TRUNCATE } [, ...] | ALL [PRIVILEGES] }

       ON { [TABLE] &lt;table_name&gt; [, ...]
            | ALL TABLES IN SCHEMA schema_name [, ...] }
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC} [, ...]
       [CASCADE | RESTRICT]

REVOKE [ GRANT OPTION FOR ] { { SELECT | INSERT | UPDATE 
       | REFERENCES } ( &lt;column_name&gt; [, ...] )
       [, ...] | ALL [ PRIVILEGES ] ( &lt;column_name&gt; [, ...] ) }
       ON [ TABLE ] &lt;table_name&gt; [, ...]
       FROM { [ GROUP ]  &lt;role_name&gt; | PUBLIC } [, ...]
       [ CASCADE | RESTRICT ]

REVOKE [GRANT OPTION FOR] { {USAGE | SELECT | UPDATE} [,...] 
       | ALL [PRIVILEGES] }
       ON { SEQUENCE &lt;sequence_name&gt; [, ...]
            | ALL SEQUENCES IN SCHEMA schema_name [, ...] }
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC } [, ...]
       [CASCADE | RESTRICT]

REVOKE [GRANT OPTION FOR] { {CREATE | CONNECT 
       | TEMPORARY | TEMP} [, ...] | ALL [PRIVILEGES] }
       ON DATABASE &lt;database_name&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC} [, ...]
       [CASCADE | RESTRICT]

REVOKE [ GRANT OPTION FOR ]
       { USAGE | ALL [ PRIVILEGES ] }
       ON DOMAIN &lt;domain_name&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC } [, ...]
       [ CASCADE | RESTRICT ]


REVOKE [ GRANT OPTION FOR ]
       { USAGE | ALL [ PRIVILEGES ] }
       ON FOREIGN DATA WRAPPER &lt;fdw_name&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC } [, ...]
       [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
       { USAGE | ALL [ PRIVILEGES ] }
       ON FOREIGN SERVER &lt;server_name&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC } [, ...]
       [ CASCADE | RESTRICT ]

REVOKE [GRANT OPTION FOR] {EXECUTE | ALL [PRIVILEGES]}
       ON { FUNCTION &lt;funcname&gt; ( [[&lt;argmode&gt;] [&lt;argname&gt;] &lt;argtype&gt;
                              [, ...]] ) [, ...]
            | ALL FUNCTIONS IN SCHEMA schema_name [, ...] }
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC} [, ...]
       [CASCADE | RESTRICT]

REVOKE [GRANT OPTION FOR] {USAGE | ALL [PRIVILEGES]}
       ON LANGUAGE &lt;langname&gt; [, ...]
       FROM { [ GROUP ]  &lt;role_name&gt; | PUBLIC} [, ...]
       [ CASCADE | RESTRICT ]

REVOKE [GRANT OPTION FOR] { {CREATE | USAGE} [, ...] 
       | ALL [PRIVILEGES] }
       ON SCHEMA &lt;schema_name&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC} [, ...]
       [CASCADE | RESTRICT]

REVOKE [GRANT OPTION FOR] { CREATE | ALL [PRIVILEGES] }
       ON TABLESPACE &lt;tablespacename&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC } [, ...]
       [CASCADE | RESTRICT]

REVOKE [ GRANT OPTION FOR ]
       { USAGE | ALL [ PRIVILEGES ] }
       ON TYPE &lt;type_name&gt; [, ...]
       FROM { [ GROUP ] &lt;role_name&gt; | PUBLIC } [, ...]
       [ CASCADE | RESTRICT ] 

REVOKE [ADMIN OPTION FOR] &lt;parent_role&gt; [, ...] 
       FROM [ GROUP ] &lt;member_role&gt; [, ...]
       [CASCADE | RESTRICT]</code></pre></div>
<div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2><p class="p"><code class="ph codeph">REVOKE</code> command revokes previously granted privileges
from one or more roles. The key word <code class="ph codeph">PUBLIC</code> refers to
the implicitly defined group of all roles. </p>
<p class="p">See the description of the <a class="xref" href="GRANT.html#topic1">GRANT</a> command for the meaning of the privilege types. </p>
<p class="p">Note that any particular role will have the sum of privileges granted directly to it, privileges
        granted to any role it is presently a member of, and privileges granted to
          <code class="ph codeph">PUBLIC</code>. Thus, for example, revoking <code class="ph codeph">SELECT</code> privilege
        from <code class="ph codeph">PUBLIC</code> does not necessarily mean that all roles have lost
          <code class="ph codeph">SELECT</code> privilege on the object: those who have it granted directly or via
            another role will still have it. Similarly, revoking <code class="ph codeph">SELECT</code> from a user might not prevent that user from using <code class="ph codeph">SELECT</code> if <code class="ph codeph">PUBLIC</code> or another membership role still has <code class="ph codeph">SELECT</code> rights.</p>
<p class="p">If <code class="ph codeph">GRANT OPTION FOR</code> is specified, only the grant
option for the privilege is revoked, not the privilege itself. Otherwise,
both the privilege and the grant option are revoked. </p>
<p class="p">If a role holds a privilege with grant option and has granted it to
other roles then the privileges held by those other roles are called
dependent privileges. If the privilege or the grant option held by the
first role is being revoked and dependent privileges exist, those dependent
privileges are also revoked if <code class="ph codeph">CASCADE</code> is specified,
else the revoke action will fail. This recursive revocation only affects
privileges that were granted through a chain of roles that is traceable
to the role that is the subject of this <code class="ph codeph">REVOKE</code> command.
Thus, the affected roles may effectively keep the privilege if it was
also granted through other roles. </p>

    <p class="p">When you revoke privileges on a table, Greenplum Database revokes the
      corresponding column privileges (if any) on each column of the table,
      as well. On the other hand, if a role has been granted privileges on
      a table, then revoking the same privileges from individual columns will
      have no effect.</p>

    <p class="p">When revoking membership in a role, <code class="ph codeph">GRANT OPTION</code>
is instead called <code class="ph codeph">ADMIN OPTION</code>, but the behavior is
similar.</p>
</div>
<div class="section" id="topic1__section4a"><h2 class="title sectiontitle">Parameters</h2><p class="p">See <a class="xref" href="GRANT.html#topic1">GRANT</a>.</p>
</div>

  <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Notes</h2>
    
    <p class="p">A user may revoke only those privileges directly granted by that user.
      If, for example, user A grants a privilege with grant option to user B,
      and user B has in turn granted it to user C, then user A cannot revoke
      the privilege directly from C. Instead, user A could revoke the grant
      option from user B and use the <code class="ph codeph">CASCADE</code> option so that
      the privilege is in turn revoked from user C. For another example, if
      both A and B grant the same privilege to C, A can revoke his own grant
      but not B's grant, so C effectively still has the privilege.</p>

    <p class="p">When a non-owner of an object attempts to <code class="ph codeph">REVOKE</code>
      privileges on the object, the command fails outright if the user has no
      privileges whatsoever on the object. As long as some privilege is available,
      the command proceeds, but it will revoke only those privileges for which
      the user has grant options. The <code class="ph codeph">REVOKE ALL PRIVILEGES</code>
      forms issue a warning message if no grant options are held, while the
      other forms issue a warning if grant options for any of the privileges
      specifically named in the command are not held. (In principle these
      statements apply to the object owner as well, but since Greenplum Database
      always treats the owner as holding all grant options, the cases can never
      occur.)</p>

    <p class="p">If a superuser chooses to issue a <code class="ph codeph">GRANT</code> or
      <code class="ph codeph">REVOKE</code> command, Greenplum Database performs the command
      as though it were issued by the owner of the affected object. Since all
      privileges ultimately come from the object owner (possibly indirectly
      via chains of grant options), it is possible for a superuser to revoke
      all privileges, but this might require use of <code class="ph codeph">CASCADE</code>
      as stated above.</p>

    <p class="p"><code class="ph codeph">REVOKE</code> may also be invoked by a role that is not the
      owner of the affected object, but is a member of the role that owns the
      object, or is a member of a role that holds privileges
      <code class="ph codeph">WITH GRANT OPTION</code> on the object. In this case, Greenplum
      Database performs the command as though it were issued by the containing
      role that actually owns the object or holds the privileges 
      <code class="ph codeph">WITH GRANT OPTION</code>. For example, if table <code class="ph codeph">t1</code>
       is owned by role <code class="ph codeph">g1</code>, of which role <code class="ph codeph">u1</code>
       is a member, then <code class="ph codeph">u1</code> can revoke privileges on
       <code class="ph codeph">t1</code> that are recorded as being granted by <code class="ph codeph">g1</code>.
       This includes grants made by <code class="ph codeph">u1</code> as well as by other
       members of role <code class="ph codeph">g1</code>.</p>

    <p class="p">If the role that runs <code class="ph codeph">REVOKE</code> holds privileges
      indirectly via more than one role membership path, it is unspecified
      which containing role will be used to perform the command. In such cases
      it is best practice to use <code class="ph codeph">SET ROLE</code> to become the
      specific role as which you want to do the <code class="ph codeph">REVOKE</code>.
      Failure to do so may lead to revoking privileges other than the ones
      you intended, or not revoking any privileges at all.</p>

    <p class="p">Use <code class="ph codeph">psql</code>'s <code class="ph codeph">\dp</code> meta-command to obtain information about
      existing privileges for tables and columns.  There are other <code class="ph codeph">\d</code>
      meta-commands that you can use to display the privileges of non-table
      objects.</p>

  </div>


<div class="section" id="topic1__section5"><h2 class="title sectiontitle">Examples</h2><p class="p">Revoke insert privilege for the public on table <code class="ph codeph">films</code>: </p>
<pre class="pre codeblock"><code>REVOKE INSERT ON films FROM PUBLIC;</code></pre><p class="p">Revoke all privileges from role <code class="ph codeph">sally</code> on view <code class="ph codeph">topten</code>. Note that
        this actually means revoke all privileges that the current role granted (if not a
        superuser).</p>
<pre class="pre codeblock"><code>REVOKE ALL PRIVILEGES ON topten FROM sally;</code></pre><p class="p">Revoke membership in role <code class="ph codeph">admins</code> from user <code class="ph codeph">joe</code>: </p>
<pre class="pre codeblock"><code>REVOKE admins FROM joe;</code></pre></div>
<div class="section" id="topic1__section6"><h2 class="title sectiontitle">Compatibility</h2><p class="p">The compatibility notes of the <a class="xref" href="GRANT.html#topic1">GRANT</a> command also apply to <code class="ph codeph">REVOKE</code>. </p>
<p class="p">Either <code class="ph codeph">RESTRICT</code> or <code class="ph codeph">CASCADE</code> is required according to the
        standard, but Greenplum Database assumes <code class="ph codeph">RESTRICT</code> by default.</p>
</div>
<div class="section" id="topic1__section7"><h2 class="title sectiontitle">See Also</h2><p class="p"><a class="xref" href="GRANT.html#topic1">GRANT</a></p>
</div>
</div>
</body>
</html>