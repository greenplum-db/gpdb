<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="ALTER RESOURCE QUEUE" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>ALTER RESOURCE QUEUE</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="topic1__au20941">ALTER RESOURCE QUEUE</h1>

  <div class="body">
    <p class="p" id="topic1__sql_command_desc">Changes the limits of a resource queue.</p>

    <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>ALTER RESOURCE QUEUE &lt;name&gt; WITH ( &lt;queue_attribute&gt;=&lt;value&gt; [, ... ] ) </code></pre>
      <p class="p">where <var class="keyword varname">queue_attribute</var> is:</p>

      <pre class="pre codeblock"><code>   ACTIVE_STATEMENTS=&lt;integer&gt;
   MEMORY_LIMIT='&lt;memory_units&gt;'
   MAX_COST=&lt;float&gt;
   COST_OVERCOMMIT={TRUE|FALSE}
   MIN_COST=&lt;float&gt;
   PRIORITY={MIN|LOW|MEDIUM|HIGH|MAX}</code></pre>
      <p class="p"></p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE &lt;name&gt; WITHOUT ( &lt;queue_attribute&gt; [, ... ] )</code></pre>
      <p class="p">where <var class="keyword varname">queue_attribute</var> is:</p>

      <pre class="pre codeblock"><code>   ACTIVE_STATEMENTS
   MEMORY_LIMIT
   MAX_COST
   COST_OVERCOMMIT
   MIN_COST</code></pre>
      <div class="note"><span class="notetitle">Note:</span> A resource queue must have either an <code class="ph codeph">ACTIVE_STATEMENTS</code> or a
          <code class="ph codeph">MAX_COST</code> value. Do not remove both these
          <code class="ph codeph">queue_attributes</code> from a resource queue. </div>

    </div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p"><code class="ph codeph">ALTER RESOURCE QUEUE</code> changes the limits of a resource queue. Only a
        superuser can alter a resource queue. A resource queue must have either an
          <code class="ph codeph">ACTIVE_STATEMENTS</code> or a <code class="ph codeph">MAX_COST</code> value (or it can have
        both). You can also set or reset priority for a resource queue to control the relative share
        of available CPU resources used by queries associated with the queue, or memory limit of a
        resource queue to control the amount of memory that all queries submitted through the queue
        can consume on a segment host.</p>

      <p class="p"><code class="ph codeph">ALTER RESOURCE QUEUE WITHOUT</code> removes the specified limits on a resource
        that were previously set. A resource queue must have either an
          <code class="ph codeph">ACTIVE_STATEMENTS</code> or a <code class="ph codeph">MAX_COST</code> value. Do not remove
        both these <code class="ph codeph">queue_attributes</code> from a resource queue.</p>

    </div>

    <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm"><var class="keyword varname">name</var></dt>

          <dd class="dd pd">The name of the resource queue whose limits are to be altered. </dd>

        
        
          <dt class="dt pt dlterm">ACTIVE_STATEMENTS <var class="keyword varname">integer</var></dt>

          <dd class="dd pd">The number of active statements submitted from users in this resource queue allowed on
            the system at any one time. The value for <code class="ph codeph">ACTIVE_STATEMENTS</code> should be
            an integer greater than 0. To reset <code class="ph codeph">ACTIVE_STATEMENTS</code> to have no limit,
            enter a value of <code class="ph codeph">-1</code>.</dd>

        
        
          <dt class="dt pt dlterm">MEMORY_LIMIT '<var class="keyword varname">memory_units</var>'</dt>

          <dd class="dd pd">Sets the total memory quota for all statements submitted from users in this resource
            queue. Memory units can be specified in kB, MB or GB. The minimum memory quota for a
            resource queue is 10MB. There is no maximum; however the upper boundary at query
            execution time is limited by the physical memory of a segment host. The default value is
            no limit (<code class="ph codeph">-1</code>).</dd>

        
        
          <dt class="dt pt dlterm">MAX_COST <var class="keyword varname">float</var></dt>

          <dd class="dd pd">The total query optimizer cost of statements submitted from users in this resource
            queue allowed on the system at any one time. The value for <code class="ph codeph">MAX_COST</code> is
            specified as a floating point number (for example 100.0) or can also be specified as an
            exponent (for example 1e+2). To reset <code class="ph codeph">MAX_COST</code> to have no limit, enter
            a value of <code class="ph codeph">-1.0</code>.</dd>

        
        
          <dt class="dt pt dlterm">COST_OVERCOMMIT <var class="keyword varname">boolean</var></dt>

          <dd class="dd pd">If a resource queue is limited based on query cost, then the administrator can allow
            cost overcommit (<code class="ph codeph">COST_OVERCOMMIT=TRUE</code>, the default). This means that a
            query that exceeds the allowed cost threshold will be allowed to run but only when the
            system is idle. If <code class="ph codeph">COST_OVERCOMMIT=FALSE</code> is specified, queries that
            exceed the cost limit will always be rejected and never allowed to run.</dd>

        
        
          <dt class="dt pt dlterm">MIN_COST <var class="keyword varname">float</var></dt>

          <dd class="dd pd">Queries with a cost under this limit will not be queued and run immediately. Cost is
            measured in units of disk page fetches; 1.0 equals one sequential disk page read. The
            value for <code class="ph codeph">MIN_COST</code> is specified as a floating point number (for example
            100.0) or can also be specified as an exponent (for example 1e+2). To reset
              <code class="ph codeph">MIN_COST</code> to have no limit, enter a value of
            <code class="ph codeph">-1.0</code>.</dd>

        
        
          <dt class="dt pt dlterm">PRIORITY={MIN|LOW|MEDIUM|HIGH|MAX}</dt>

          <dd class="dd pd">Sets the priority of queries associated with a resource queue. Queries or statements
            in queues with higher priority levels will receive a larger share of available CPU
            resources in case of contention. Queries in low-priority queues may be delayed while
            higher priority queries are run.</dd>

        
      </dl>

    </div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
      
        <p class="p">GPORCA and the Postgres planner utilize different
           query costing models and may compute different costs for the same query.
           The Greenplum Database resource queue resource management scheme neither
           differentiates nor aligns costs between GPORCA and the Postgres Planner; it
           uses the literal cost value returned from the optimizer to throttle
           queries.</p>

        <p class="p">When resource queue-based resource management is active, use the
           <code class="ph codeph">MEMORY_LIMIT</code> and <code class="ph codeph">ACTIVE_STATEMENTS</code> limits for
           resource queues rather than configuring cost-based limits. Even when using GPORCA,
           Greenplum Database may fall back to using the Postgres Planner for certain
           queries, so using cost-based limits can lead to unexpected results.</p>

    </div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
      
      <p class="p">Change the active query limit for a resource queue: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE myqueue WITH (ACTIVE_STATEMENTS=20);</code></pre>
      <p class="p">Change the memory limit for a resource queue: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE myqueue WITH (MEMORY_LIMIT='2GB');</code></pre>
      <p class="p">Reset the maximum and minimum query cost limit for a resource queue to no limit: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE myqueue WITH (MAX_COST=-1.0, 
  MIN_COST= -1.0);</code></pre>
      <p class="p">Reset the query cost limit for a resource queue to 3<sup class="ph sup">10</sup> (or 30000000000.0) and do
        not allow overcommit:</p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE myqueue WITH (MAX_COST=3e+10, 
  COST_OVERCOMMIT=FALSE);</code></pre>
      <p class="p">Reset the priority of queries associated with a resource queue to the minimum level:</p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE myqueue WITH (PRIORITY=MIN);</code></pre>
      <p class="p">Remove the <code class="ph codeph">MAX_COST</code> and <code class="ph codeph">MEMORY_LIMIT</code> limits from a
        resource queue:</p>

      <pre class="pre codeblock"><code>ALTER RESOURCE QUEUE myqueue WITHOUT (MAX_COST, MEMORY_LIMIT);</code></pre>
    </div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
      
      <p class="p">The <code class="ph codeph">ALTER RESOURCE QUEUE</code> statement is a Greenplum Database extension. This
        command does not exist in standard PostgreSQL.</p>

    </div>

    <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><a class="xref" href="CREATE_RESOURCE_QUEUE.html#topic1">CREATE RESOURCE QUEUE</a>, <a class="xref" href="DROP_RESOURCE_QUEUE.html#topic1">DROP RESOURCE QUEUE</a>, <a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a>, <a class="xref" href="ALTER_ROLE.html#topic1">ALTER ROLE</a></p>

    </div>

  </div>

</body>
</html>