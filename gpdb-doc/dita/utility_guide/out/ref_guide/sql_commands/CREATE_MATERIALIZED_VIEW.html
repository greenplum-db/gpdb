<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="CREATE MATERIALIZED VIEW" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>CREATE MATERIALIZED VIEW</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="topic1__cj20941">CREATE MATERIALIZED VIEW</h1>

  <div class="body">
    <p class="p" id="topic1__sql_command_desc">Defines a new materialized view.</p>

    <div class="section" id="topic1__section1"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>CREATE MATERIALIZED VIEW &lt;table_name&gt;
    [ (&lt;column_name&gt; [, ...] ) ]
    [ WITH ( &lt;storage_parameter&gt; [= &lt;value&gt;] [, ... ] ) ]
    [ TABLESPACE &lt;tablespace_name&gt; ]
    AS &lt;query&gt;
    [ WITH [ NO ] DATA ]
    [DISTRIBUTED {| BY &lt;column&gt; [&lt;opclass&gt;], [ ... ] | RANDOMLY | REPLICATED }]</code></pre>
    </div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p"><code class="ph codeph">CREATE MATERIALIZED VIEW</code> defines a materialized view of a query. The query
        is run and used to populate the view at the time the command is issued (unless
          <code class="ph codeph">WITH NO DATA</code> is used) and can be refreshed using <code class="ph codeph">REFRESH
          MATERIALIZED VIEW</code>.</p>

      <p class="p"><code class="ph codeph">CREATE MATERIALIZED VIEW</code> is similar to <code class="ph codeph">CREATE TABLE AS</code>,
        except that it also remembers the query used to initialize the view, so that it can be
        refreshed later upon demand. To refresh materialized view data, use the <code class="ph codeph">REFRESH
          MATERIALIZED VIEW</code> command. A materialized view has many of the same properties as
        a table, but there is no support for temporary materialized views or automatic generation of
        OIDs. </p>

    </div>

    <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm"><var class="keyword varname">table_name</var></dt>

          <dd class="dd pd">The name (optionally schema-qualified) of the materialized view to be created.</dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">column_name</var></dt>

          <dd class="dd pd">The name of a column in the materialized view. The column names are assigned based on
            position. The first column name is assigned to the first column of the query result, and
            so on. If a column name is not provided, it is taken from the output column names of the
            query.</dd>

        
        
          <dt class="dt pt dlterm">WITH ( <var class="keyword varname">storage_parameter</var> [= <var class="keyword varname">value</var>] [, ... ]
            )</dt>

          <dd class="dd pd">This clause specifies optional storage parameters for the materialized view. All
            parameters supported for <code class="ph codeph">CREATE TABLE</code> are also supported for
              <code class="ph codeph">CREATE MATERIALIZED VIEW</code> with the exception of OIDS. See
                <a class="xref" href="CREATE_TABLE.html">CREATE TABLE</a> for more information.</dd>

        
        
          <dt class="dt pt dlterm">TABLESPACE <var class="keyword varname">tablespace_name</var></dt>

          <dd class="dd pd">The <var class="keyword varname">tablespace_name</var> is the name of the tablespace in which the new
            materialized view is to be created. If not specified, server configuration parameter
                <a class="xref" href="../config_params/guc-list.html#default_tablespace">default_tablespace</a> is
            consulted.</dd>

        
        
          <dt class="dt pt dlterm">query</dt>

          <dd class="dd pd">A <a class="xref" href="SELECT.html">SELECT</a> or <a class="xref" href="VALUES.html">VALUES</a> command. This query will run within a security-restricted operation; in
            particular, calls to functions that themselves create temporary tables will fail.</dd>

        
        
          <dt class="dt pt dlterm">WITH [ NO ] DATA</dt>

          <dd class="dd pd">This clause specifies whether or not the materialized view should be populated with
            data at creation time. <code class="ph codeph">WITH DATA</code> is the default, populate the
            materialized view. For <code class="ph codeph">WITH NO DATA</code>, the materialized view is not
            populated with data, is flagged as unscannable, and cannot be queried until
              <code class="ph codeph">REFRESH MATERIALIZED VIEW</code> is used to populate the materialized view.
            An error is returned if a query attempts to access an unscannable materialized
            view.</dd>

        
        
          <dt class="dt pt dlterm">DISTRIBUTED BY (column [opclass], [ ... ] )</dt>

          <dt class="dt pt dlterm">DISTRIBUTED RANDOMLY</dt>

          <dt class="dt pt dlterm">DISTRIBUTED REPLICATED</dt>

          <dd class="dd pd">Used to declare the Greenplum Database distribution policy for the materialized view
            data. For information about a table distribution policy, see <a class="xref" href="CREATE_TABLE.html">CREATE TABLE</a>.</dd>

        
      </dl>

    </div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
      
      <p class="p">Materialized views are read only. The system will not allow an <code class="ph codeph">INSERT</code>,
          <code class="ph codeph">UPDATE</code>, or <code class="ph codeph">DELETE</code> on a materialized view. Use
          <code class="ph codeph">REFRESH MATERIALIZED VIEW</code> to update the materialized view data.</p>

      <p class="p">If you want the data to be ordered upon generation, you must use an <code class="ph codeph">ORDER
          BY</code> clause in the materialized view query. However, if a materialized view query
        contains an <code class="ph codeph">ORDER BY</code> or <code class="ph codeph">SORT</code> clause, the data is not
        guaranteed to be ordered or sorted if <code class="ph codeph">SELECT</code> is performed on the
        materialized view.</p>

    </div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
      
      <p class="p">Create a view consisting of all comedy films: </p>

      <pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW comedies AS SELECT * FROM films 
WHERE kind = 'comedy';</code></pre>
      <p class="p">This will create a view containing the columns that are in the <code class="ph codeph">film</code> table
        at the time of view creation. Though <code class="ph codeph">*</code> was used to create the materialized
        view, columns added later to the table will not be part of the view. </p>

      <p class="p">Create a view that gets the top ten ranked baby names:</p>

      <pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW topten AS SELECT name, rank, gender, year FROM 
names, rank WHERE rank &lt; '11' AND names.id=rank.id;</code></pre>
    </div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
      
      <p class="p"><code class="ph codeph">CREATE MATERIALIZED VIEW</code> is a Greenplum Database extension of the SQL
        standard.</p>

    </div>

    <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><a class="xref" href="SELECT.html">SELECT</a>, <a class="xref" href="VALUES.html">VALUES</a>, <a class="xref" href="CREATE_VIEW.html">CREATE VIEW</a>,
            <a class="xref" href="ALTER_MATERIALIZED_VIEW.html">ALTER MATERIALIZED
        VIEW</a>, <a class="xref" href="DROP_MATERIALIZED_VIEW.html">DROP MATERIALIZED
            VIEW</a>, <a class="xref" href="REFRESH_MATERIALIZED_VIEW.html">REFRESH MATERIALIZED VIEW</a></p>

    </div>

  </div>

</body>
</html>