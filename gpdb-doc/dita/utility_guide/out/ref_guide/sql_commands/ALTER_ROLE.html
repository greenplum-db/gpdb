<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="ALTER ROLE" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>ALTER ROLE</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="topic1__av20941">ALTER ROLE</h1>

  <div class="body">
    <p class="p" id="topic1__sql_command_desc">Changes a database role (user or group).</p>

    <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>ALTER ROLE &lt;name&gt; [ [ WITH ] &lt;option&gt; [ ... ] ]

where &lt;option&gt; can be:

    SUPERUSER | NOSUPERUSER
  | CREATEDB | NOCREATEDB
  | CREATEROLE | NOCREATEROLE
  | CREATEEXTTABLE | NOCREATEEXTTABLE  [ ( attribute='value' [, ...] )
     where attributes and values are:
       type='readable'|'writable'
       protocol='gpfdist'|'http'
  | INHERIT | NOINHERIT
  | LOGIN | NOLOGIN
  | REPLICATION | NOREPLICATION
  | CONNECTION LIMIT &lt;connlimit&gt;
  | [ ENCRYPTED | UNENCRYPTED ] PASSWORD '&lt;password&gt;'
  | VALID UNTIL '&lt;timestamp&gt;'

ALTER ROLE &lt;name&gt; RENAME TO &lt;new_name&gt;

ALTER ROLE { &lt;name&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] SET &lt;configuration_parameter&gt; { TO | = } { &lt;value&gt; | DEFAULT }
ALTER ROLE { &lt;name&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] SET &lt;configuration_parameter&gt; FROM CURRENT
ALTER ROLE { &lt;name&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] RESET &lt;configuration_parameter&gt;
ALTER ROLE { &lt;name&gt; | ALL } [ IN DATABASE &lt;database_name&gt; ] RESET ALL
ALTER ROLE &lt;name&gt; RESOURCE QUEUE {&lt;queue_name&gt; | NONE}
ALTER ROLE &lt;name&gt; RESOURCE GROUP {&lt;group_name&gt; | NONE}
</code></pre>
    </div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p"><code class="ph codeph">ALTER ROLE</code> changes the attributes of a Greenplum Database role. There are
        several variants of this command.</p>

      <dl class="dl parml">
        
          <dt class="dt pt dlterm" id="topic1__av137061"><strong class="ph b">WITH <var class="keyword varname">option</var></strong></dt>

          <dd class="dd pd">Changes many of the role attributes that can be specified in <a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a>. (All of the
            possible attributes are covered, execept that there are no options for adding or
            removing memberships; use <a class="xref" href="GRANT.html#topic1">GRANT</a>
            and <a class="xref" href="REVOKE.html#topic1">REVOKE</a> for that.) Attributes
            not mentioned in the command retain their previous settings. Database superusers can
            change any of these settings for any role. Roles having <code class="ph codeph">CREATEROLE</code>
            privilege can change any of these settings, but only for non-superuser and
            non-replication roles. Ordinary roles can only change their own password.</dd>

        
        
          <dt class="dt pt dlterm" id="topic1__av136726"><strong class="ph b">RENAME</strong></dt>

          <dd class="dd pd">Changes the name of the role. Database superusers can
          rename any role. Roles having <code class="ph codeph">CREATEROLE</code> privilege can rename
          non-superuser roles. The current session user cannot be renamed (connect as a different
          user to rename a role). Because MD5-encrypted passwords use the role name as cryptographic
          salt, renaming a role clears its password if the password is MD5-encrypted.</dd>

        <dt class="dt pt dlterm" id="topic1__av136604"><strong class="ph b">SET | RESET</strong></dt>
<dd class="dd pd">Changes a role's session default for a 
          specified configuration parameter, either for all
            databases or, when the <code class="ph codeph">IN DATABASE</code> clause is specified, only for
            sessions in the named database. If <code class="ph codeph">ALL</code> is specified instead of a role
            name, this changes the setting for all roles. Using <code class="ph codeph">ALL</code> with <code class="ph codeph">IN
              DATABASE</code> is effectively the same as using the command <code class="ph codeph">ALTER
              DATABASE...SET...</code>. <p class="p">Whenever the role subsequently starts a new session,
              the specified value becomes the session default, overriding whatever setting is
              present in the server configuration file (<code class="ph codeph">postgresql.conf</code>) or has
              been received from the <code class="ph codeph">postgres</code> command line. This only happens at
              login time; running <a class="xref" href="SET_ROLE.html#topic1">SET ROLE</a> or <a class="xref" href="SET_SESSION_AUTHORIZATION.html#topic1">SET SESSION AUTHORIZATION</a> does
              not cause new configuration values to be set. </p>
<p class="p">Database-specific settings
                attached to a role override settings for all databases. Settings for specific 
                databases or specific roles override
                settings for all roles.</p>
<p class="p">For a role without
                <code class="ph codeph">LOGIN</code> privilege, session defaults have no effect. Ordinary roles
              can change their own session defaults. Superusers can change anyone's session
              defaults. Roles having <code class="ph codeph">CREATEROLE</code> privilege can change defaults for
              non-superuser roles. Ordinary roles can only set defaults for themselves. Certain
              configuration variables cannot be set this way, or can only be set if a superuser
              issues the command. See the <em class="ph i">Greenplum Database Reference Guide</em> for information
                  about all user-settable configuration parameters. Only superusers can change a setting
                  for all roles in all databases.</p>
</dd>

        
        <dt class="dt pt dlterm" id="topic1__av137058"><strong class="ph b">RESOURCE QUEUE</strong></dt>
<dd class="dd pd">Assigns the role to a resource
          queue. The role would then be subject to the limits assigned to the resource queue when
          issuing queries. Specify <code class="ph codeph">NONE</code> to assign the role to the default resource
          queue. A role can only belong to one resource queue. For a role without
            <code class="ph codeph">LOGIN</code> privilege, resource queues have no effect. See <a class="xref" href="CREATE_RESOURCE_QUEUE.html#topic1">CREATE RESOURCE QUEUE</a> for
          more information.</dd>

        <dt class="dt pt dlterm" id="topic1__av1370583"><strong class="ph b">RESOURCE GROUP</strong></dt>
<dd class="dd pd">Assigns a resource group to the role. The role
          would then be subject to the concurrent transaction, memory, and CPU limits configured for
          the resource group. You can assign a single resource group to one or more roles. You
          cannot assign a resource group that you create for an external component to a role. See
              <a class="xref" href="CREATE_RESOURCE_GROUP.html#topic1">CREATE RESOURCE GROUP</a> for additional information.  </dd>

      </dl>

    </div>

    <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm"><var class="keyword varname">name</var></dt>

          <dd class="dd pd">The name of the role whose attributes are to be altered. </dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">new_name</var></dt>

          <dd class="dd pd">The new name of the role. </dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">database_name</var></dt>

          <dd class="dd pd">The name of the database in which to set the configuration parameter.</dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">config_parameter=value</var></dt>

          <dd class="dd pd">Set this role's session default for the specified configuration parameter to the given
            value. If <var class="keyword varname">value</var> is <code class="ph codeph">DEFAULT</code> or if
              <code class="ph codeph">RESET</code> is used, the role-specific parameter setting is removed, so the
            role will inherit the system-wide default setting in new sessions. Use <code class="ph codeph">RESET
              ALL</code> to clear all role-specific settings. <code class="ph codeph">SET FROM CURRENT</code>
            saves the session's current value of the parameter as the role-specific value. If
              <code class="ph codeph">IN DATABASE</code> is specified, the configuration parameter is set or
            removed for the given role and database only. Whenever the role subsequently starts a
            new session, the specified value becomes the session default, overriding whatever
            setting is present in <code class="ph codeph">postgresql.conf</code> or has been received from the
            <code class="ph codeph">postgres</code> command line.</dd>

          <dd class="dd pd ddexpand">Role-specific variable settings take effect only at login; <code class="ph codeph">SET
                ROLE</code> and <a class="xref" href="SET_SESSION_AUTHORIZATION.html#topic1">SET SESSION AUTHORIZATION</a> do not process role-specific
            variable settings. </dd>

          <dd class="dd pd ddexpand">See <a class="xref" href="../config_params/guc_config.html">Server Configuration Parameters</a> for information about user-settable configuration
            parameters. </dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">group_name</var></dt>

          <dd class="dd pd">The name of the resource group to assign to this role. Specifying the
              <var class="keyword varname">group_name</var>
            <code class="ph codeph">NONE</code> removes the role's current resource group assignment and assigns a
            default resource group based on the role's capability. <code class="ph codeph">SUPERUSER</code> roles
            are assigned the <code class="ph codeph">admin_group</code> resource group, while the
              <code class="ph codeph">default_group</code> resource group is assigned to non-admin roles.</dd>

          <dd class="dd pd ddexpand">You cannot assign a resource group that you create for an external component to a role.</dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">queue_name</var></dt>

          <dd class="dd pd">The name of the resource queue to which the user-level role is to be assigned. Only
            roles with <code class="ph codeph">LOGIN</code> privilege can be assigned to a resource queue. To
            unassign a role from a resource queue and put it in the default resource queue, specify
              <code class="ph codeph">NONE</code>. A role can only belong to one resource queue.</dd>

        
        
          <dt class="dt pt dlterm">SUPERUSER | NOSUPERUSER</dt>

          <dt class="dt pt dlterm">CREATEDB | NOCREATEDB</dt>

          <dt class="dt pt dlterm">CREATEROLE | NOCREATEROLE</dt>

          <dt class="dt pt dlterm">CREATEUSER | NOCREATEUSER</dt>

          <dd class="dd pd"><code class="ph codeph">CREATEUSER</code> and <code class="ph codeph">NOCREATEUSER</code> are obsolete, but still
            accepted, spellings of <code class="ph codeph">SUPERUSER</code> and <code class="ph codeph">NOSUPERUSER</code>. Note
            that they are not equivalent to the <code class="ph codeph">CREATEROLE and</code>
            <code class="ph codeph">NOCREATEROLE</code> clauses.</dd>

        
        
          <dt class="dt pt dlterm">CREATEEXTTABLE | NOCREATEEXTTABLE [(attribute='value')]</dt>

          <dd class="dd pd">If <code class="ph codeph">CREATEEXTTABLE</code> is specified, the role being defined is allowed to
            create external tables. The default <code class="ph codeph">type</code> is <code class="ph codeph">readable</code>
            and the default <code class="ph codeph">protocol</code> is <code class="ph codeph">gpfdist</code> if not specified.
              <code class="ph codeph">NOCREATEEXTTABLE</code> (the default) denies the role the ability to create
            external tables. Note that external tables that use the <code class="ph codeph">file</code> or
              <code class="ph codeph">execute</code> protocols can only be created by superusers.</dd>

        
        
          <dt class="dt pt dlterm">INHERIT | NOINHERIT</dt>

          <dt class="dt pt dlterm">LOGIN | NOLOGIN</dt>

          <dt class="dt pt dlterm">REPLICATION</dt>

          <dt class="dt pt dlterm">NOREPLICATION</dt>

          <dt class="dt pt dlterm">CONNECTION LIMIT connlimit </dt>

          <dt class="dt pt dlterm">PASSWORD password</dt>

          <dt class="dt pt dlterm">ENCRYPTED | UNENCRYPTED</dt>

          <dt class="dt pt dlterm">VALID UNTIL 'timestamp'</dt>

          <dd class="dd pd">These clauses alter role attributes originally set by <code class="ph codeph"><a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a></code>. </dd>

        
        
          <dt class="dt pt dlterm">DENY deny_point</dt>

          <dt class="dt pt dlterm">DENY BETWEEN deny_point AND deny_point</dt>

          <dd class="dd pd">The <code class="ph codeph">DENY</code> and <code class="ph codeph">DENY BETWEEN</code> keywords set time-based
            constraints that are enforced at login. <code class="ph codeph">DENY</code> sets a day or a day and
            time to deny access. <code class="ph codeph">DENY BETWEEN</code> sets an interval during which access
            is denied. Both use the parameter <var class="keyword varname">deny_point</var> that has following
            format:<pre class="pre codeblock"><code>DAY day [ TIME 'time' ]</code></pre></dd>

          <dd class="dd pd ddexpand">The two parts of the <code class="ph codeph">deny_point</code> parameter use the following
              formats:<p class="p">For
              day:</p>
<pre class="pre codeblock"><code>{'Sunday' | 'Monday' | 'Tuesday' |'Wednesday' | 'Thursday' | 'Friday' | 
'Saturday' | 0-6 }</code></pre><p class="p">For
                <code class="ph codeph">time:</code></p>
</dd>

          <dd class="dd pd ddexpand">
            <pre class="pre codeblock"><code>{ 00-23 : 00-59 | 01-12 : 00-59 { AM | PM }}</code></pre>
          </dd>

          <dd class="dd pd ddexpand">The <code class="ph codeph">DENY BETWEEN</code> clause uses two <var class="keyword varname">deny_point</var>
            parameters which must indicate day and time.</dd>

          <dd class="dd pd ddexpand">
            <pre class="pre codeblock"><code>DENY BETWEEN &lt;deny_point&gt; AND &lt;deny_point&gt;</code></pre>
          </dd>

          <dd class="dd pd ddexpand">For example:</dd>

          <dd class="dd pd ddexpand">
            <pre class="pre codeblock"><code>ALTER USER user1 DENY BETWEEN day 'Sunday' time '00:00' AND day 'Monday' time '00:00'; </code></pre>
          </dd>

          <dd class="dd pd ddexpand">For more information about time-based constraints and examples, see "Managing Roles
            and Privileges" in the <em class="ph i">Greenplum Database Administrator Guide</em>.</dd>

        
        
          <dt class="dt pt dlterm">DROP DENY FOR deny_point</dt>

          <dd class="dd pd">The <code class="ph codeph">DROP DENY FOR</code> clause removes a time-based constraint from the
            role. It uses the <var class="keyword varname">deny_point</var> parameter described above. </dd>

          <dd class="dd pd ddexpand">For more information about time-based constraints and examples, see "Managing Roles
            and Privileges" in the <em class="ph i">Greenplum Database Administrator Guide</em>.</dd>

        
      </dl>

    </div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
      
      <p class="p">Use <a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a> to add new
        roles, and <a class="xref" href="DROP_ROLE.html#topic1">DROP ROLE</a> to remove a
        role. </p>

      <p class="p">Use <a class="xref" href="GRANT.html#topic1">GRANT</a> and
            <a class="xref" href="REVOKE.html#topic1">REVOKE</a> for
        adding and removing role memberships.</p>

      <p class="p">Caution must be exercised when specifying an unencrypted password with this command. The
        password will be transmitted to the server in clear text, and it might also be logged in the
        client's command history or the server log. The <code class="ph codeph">psql</code> command-line client
        contains a meta-command <code class="ph codeph">\password</code> that can be used to change a role's
        password without exposing the clear text password. </p>

      <p class="p">It is also possible to tie a session default to a specific database rather than to a role;
        see <a class="xref" href="ALTER_DATABASE.html#topic1">ALTER DATABASE</a>. If
        there is a conflict, database-role-specific settings override role-specific ones, which in
        turn override database-specific ones. </p>

    </div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
      
      <p class="p">Change the password for a role: </p>

      <pre class="pre codeblock"><code>ALTER ROLE daria WITH PASSWORD 'passwd123';</code></pre>
      <p class="p">Remove a role's password:</p>

      <pre class="pre codeblock"><code>ALTER ROLE daria WITH PASSWORD NULL;</code></pre>
      <p class="p">Change a password expiration date:</p>

      <pre class="pre codeblock"><code>ALTER ROLE scott VALID UNTIL 'May 4 12:00:00 2015 +1';</code></pre>
      <p class="p">Make a password valid forever:</p>

      <pre class="pre codeblock"><code>ALTER ROLE luke VALID UNTIL 'infinity';</code></pre>
      <p class="p">Give a role the ability to create other roles and new databases: </p>

      <pre class="pre codeblock"><code>ALTER ROLE joelle CREATEROLE CREATEDB;</code></pre>
      <p class="p">Give a role a non-default setting of the <code class="ph codeph">maintenance_work_mem</code> parameter: </p>

      <pre class="pre codeblock"><code>ALTER ROLE admin SET maintenance_work_mem = 100000;</code></pre>
      <p class="p">Give a role a non-default, database-specific setting of the <code class="ph codeph">client_min_messages</code> parameter: </p>

      <pre class="pre codeblock"><code>ALTER ROLE fred IN DATABASE devel SET client_min_messages = DEBUG;</code></pre>
      <p class="p">Assign a role to a resource queue: </p>

      <pre class="pre codeblock"><code>ALTER ROLE sammy RESOURCE QUEUE poweruser;</code></pre>
      <p class="p">Give a role permission to create writable external tables:</p>

      <pre class="pre codeblock"><code>ALTER ROLE load CREATEEXTTABLE (type='writable');</code></pre>
      <p class="p">Alter a role so it does not allow login access on Sundays:</p>

      <pre class="pre codeblock"><code>ALTER ROLE user3 DENY DAY 'Sunday';</code></pre>
      <p class="p">Alter a role to remove the constraint that does not allow login access on Sundays:</p>

      <pre class="pre codeblock"><code>ALTER ROLE user3 DROP DENY FOR DAY 'Sunday';</code></pre>
      <p class="p">Assign a new resource group to a role: </p>

      <pre class="pre codeblock"><code>ALTER ROLE parttime_user RESOURCE GROUP rg_light;</code></pre>
    </div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
      
      <p class="p">The <code class="ph codeph">ALTER ROLE</code> statement is a Greenplum Database extension.</p>

    </div>

    <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a>,
            <a class="xref" href="DROP_ROLE.html#topic1">DROP ROLE</a>,
            <a class="xref" href="ALTER_DATABASE.html#topic1">ALTER DATABASE</a>,
            <a class="xref" href="SET.html#topic1">SET</a>,
            <a class="xref" href="CREATE_RESOURCE_GROUP.html#topic1">CREATE RESOURCE GROUP</a>, <a class="xref" href="CREATE_RESOURCE_QUEUE.html#topic1">CREATE RESOURCE QUEUE</a>, <a class="xref" href="GRANT.html#topic1">GRANT</a>, <a class="xref" href="REVOKE.html#topic1">REVOKE</a></p>

    </div>

  </div>

</body>
</html>