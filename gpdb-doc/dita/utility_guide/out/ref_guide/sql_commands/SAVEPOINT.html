<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="SAVEPOINT" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>SAVEPOINT</title>
</head>
<body id="topic1">
<h1 class="title topictitle1" id="topic1__ef20941">SAVEPOINT</h1>
<div class="body"><p class="p" id="topic1__sql_command_desc">Defines a new savepoint within the current transaction.</p>
<div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2><pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>SAVEPOINT &lt;savepoint_name&gt;</code></pre></div>
<div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2><p class="p"><code class="ph codeph">SAVEPOINT</code> establishes a new savepoint within the current
transaction. </p>
<p class="p">A savepoint is a special mark inside a transaction that allows all
commands that are run after it was established to be rolled back,
restoring the transaction state to what it was at the time of the savepoint.</p>
</div>
<div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2><dl class="dl parml"><dt class="dt pt dlterm"><var class="keyword varname">savepoint_name</var></dt>
<dd class="dd pd">The name of the new savepoint.</dd>
</dl>
</div>
<div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2><p class="p">Use <a class="xref" href="ROLLBACK_TO_SAVEPOINT.html#topic1">ROLLBACK TO SAVEPOINT</a>
                to rollback to a savepoint. Use <a class="xref" href="RELEASE_SAVEPOINT.html#topic1">RELEASE SAVEPOINT</a> to destroy a savepoint, keeping the
                effects of commands run after it was established.</p>
<p class="p">Savepoints can only be established when inside a transaction block.
There can be multiple savepoints defined within a transaction.</p>
</div>
<div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2><p class="p">To establish a savepoint and later undo the effects of all commands
run after it was established:</p>
<pre class="pre codeblock"><code>BEGIN;
    INSERT INTO table1 VALUES (1);
    SAVEPOINT my_savepoint;
    INSERT INTO table1 VALUES (2);
    ROLLBACK TO SAVEPOINT my_savepoint;
    INSERT INTO table1 VALUES (3);
COMMIT;</code></pre><p class="p">The above transaction will insert the values 1 and 3, but not 2. </p>
<p class="p">To establish and later destroy a savepoint:</p>
<pre class="pre codeblock"><code>BEGIN;
    INSERT INTO table1 VALUES (3);
    SAVEPOINT my_savepoint;
    INSERT INTO table1 VALUES (4);
    RELEASE SAVEPOINT my_savepoint;
COMMIT;</code></pre><p class="p">The above transaction will insert both 3 and 4. </p>
</div>
<div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2><p class="p">SQL requires a savepoint to be destroyed automatically when another savepoint with the same name
                is established. In Greenplum Database, the old savepoint is kept, though only the
                more recent one will be used when rolling back or releasing. (Releasing the newer
                savepoint will cause the older one to again become accessible to <a class="xref" href="ROLLBACK_TO_SAVEPOINT.html#topic1">ROLLBACK TO SAVEPOINT</a> and <a class="xref" href="RELEASE_SAVEPOINT.html#topic1">RELEASE SAVEPOINT</a>.) Otherwise, <code class="ph codeph">SAVEPOINT</code> is fully
                SQL conforming.</p>
</div>
<div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2><p class="p"><a class="xref" href="BEGIN.html#topic1">BEGIN</a>, <a class="xref" href="COMMIT.html#topic1">COMMIT</a>,
                        <a class="xref" href="ROLLBACK.html#topic1">ROLLBACK</a>, <a class="xref" href="RELEASE_SAVEPOINT.html#topic1">RELEASE SAVEPOINT</a>, <a class="xref" href="ROLLBACK_TO_SAVEPOINT.html#topic1">ROLLBACK TO SAVEPOINT</a></p>
</div>
</div>
</body>
</html>