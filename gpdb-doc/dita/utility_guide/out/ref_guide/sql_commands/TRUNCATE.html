<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="TRUNCATE" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>TRUNCATE</title>
</head>
<body id="topic1">
<h1 class="title topictitle1" id="topic1__ep20941">TRUNCATE</h1>
<div class="body"><p class="p" id="topic1__sql_command_desc">Empties a table of all rows.</p>

    <div class="note"><span class="notetitle">Note:</span> Greenplum Database does not enforce referential integrity syntax (foreign key
      constraints). As of version 6.12 <code class="ph codeph">TRUNCATE</code> truncates a table that is
      referenced in a foreign key constraint even if the <code class="ph codeph">CASCADE</code> option is
      omitted.</div>
<div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2><pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>TRUNCATE [TABLE] [ONLY] &lt;name&gt; [ * ] [, ...] 
    [ RESTART IDENTITY | CONTINUE IDENTITY ] [CASCADE | RESTRICT]</code></pre></div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2><p class="p"><code class="ph codeph">TRUNCATE</code> quickly removes
        all rows from a table or set of tables. It has the same effect as an unqualified
            <a class="xref" href="DELETE.html#topic1">DELETE</a> on each
        table, but since it does not actually scan the tables it is faster. This is most useful on
        large tables.</p>

      <p class="p">You must have the <code class="ph codeph">TRUNCATE</code> privilege on the table to truncate table
        rows.</p>
<p class="p"><code class="ph codeph">TRUNCATE</code> acquires an access exclusive lock on the tables it
        operates on, which blocks all other concurrent operations on the table. When <code class="ph codeph">RESTART
          IDENTITY</code> is specified, any sequences that are to be restarted are likewise locked
        exclusively. If concurrent access to a table is required, then the <code class="ph codeph">DELETE</code>
          command should be used instead. </p>
</div>
<div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2><dl class="dl parml"><dt class="dt pt dlterm"><var class="keyword varname">name</var></dt>
<dd class="dd pd">The name (optionally schema-qualified) of a table to truncate. If <code class="ph codeph">ONLY</code> is
            specified before the table name, only that table is truncated. If <code class="ph codeph">ONLY</code>
            is not specified, the table and all its descendant tables (if any) are truncated.
            Optionally, <code class="ph codeph">*</code> can be specified after the table name to explicitly
            indicate that descendant tables are included.</dd>
<dt class="dt pt dlterm">CASCADE</dt>
<dd class="dd pd">Because this key word applies to foreign key references (which are not supported in Greenplum
            Database) it has no effect.</dd>

        
          <dt class="dt pt dlterm">RESTART IDENTITY</dt>

          <dd class="dd pd">Automatically restart sequences owned by columns of the truncated table(s).</dd>

        
        
          <dt class="dt pt dlterm">CONTINUE IDENTITY</dt>

          <dd class="dd pd">Do not change the values of sequences. This is the default.</dd>

        <dt class="dt pt dlterm">RESTRICT</dt>
<dd class="dd pd">Because this key word applies to foreign key references (which are not supported in Greenplum
            Database) it has no effect.</dd>
</dl>
</div>
<div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2><p class="p"><code class="ph codeph">TRUNCATE</code> will not run any user-defined <code class="ph codeph">ON
              DELETE</code> triggers that might exist for the tables.</p>
<p class="p"><code class="ph codeph">TRUNCATE</code> will not truncate any tables that inherit
from the named table. Only the named table is truncated, not its child
tables.</p>
<p class="p"><code class="ph codeph">TRUNCATE</code> will not truncate any sub-tables of a partitioned
table. If you specify a sub-table of a partitioned table, <code class="ph codeph">TRUNCATE</code>
  will not remove rows from the sub-table and its child tables.</p>

              <p class="p"> <code class="ph codeph">TRUNCATE</code> is not MVCC-safe. After truncation, the table will
                appear empty to concurrent transactions, if they are using a snapshot
                taken before the truncation occurred.</p>

      <p class="p"><code class="ph codeph">TRUNCATE</code> is transaction-safe with respect to the data in the tables: the
        truncation will be safely rolled back if the surrounding transaction does not commit.</p>

      <p class="p"><code class="ph codeph">TRUNCATE</code> acquires an <code class="ph codeph">ACCESS EXCLUSIVE</code> lock on each table
        it operates on, which blocks all other concurrent operations on the table. If concurrent
        access to a table is required, then the <code class="ph codeph">DELETE</code> command should be used
        instead. </p>

      <p class="p">When <code class="ph codeph">RESTART IDENTITY</code> is specified, the implied <code class="ph codeph">ALTER SEQUENCE
          RESTART</code> operations are also done transactionally; that is, they will be rolled
        back if the surrounding transaction does not commit. This is unlike the normal behavior of
          <code class="ph codeph">ALTER SEQUENCE RESTART</code>. Be aware that if any additional sequence
        operations are done on the restarted sequences before the transaction rolls back, the
        effects of these operations on the sequences will be rolled back, but not their effects on
          <code class="ph codeph">currval()</code>; that is, after the transaction <code class="ph codeph">currval()</code> will
        continue to reflect the last sequence value obtained inside the failed transaction, even
        though the sequence itself may no longer be consistent with that. This is similar to the
        usual behavior of <code class="ph codeph">currval()</code> after a failed transaction.</p>

</div>
<div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2><p class="p">Empty the tables <code class="ph codeph">films</code> and <code class="ph codeph">distributors</code>:</p>
<pre class="pre codeblock"><code>TRUNCATE films, distributors;</code></pre>
      <p class="p">The same, and also reset any associated sequence generators:</p>

  <pre class="pre codeblock"><code>TRUNCATE films, distributors RESTART IDENTITY;</code></pre></div>
<div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
      <p class="p">The SQL:2008 standard includes a <code class="ph codeph">TRUNCATE</code> command with the syntax
          <code class="ph codeph">TRUNCATE TABLE <var class="keyword varname">tablename</var></code>. The clauses <code class="ph codeph">CONTINUE
          IDENTITY</code>/<code class="ph codeph">RESTART IDENTITY</code> also appear in that standard, but have
        slightly different though related meanings. Some of the concurrency behavior of this command
        is left implementation-defined by the standard, so the above notes should be considered and
        compared with other implementations if necessary. </p>
</div>
<div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2><p class="p"><a class="xref" href="DELETE.html#topic1">DELETE</a>, <a class="xref" href="DROP_TABLE.html#topic1">DROP TABLE</a></p>
</div>
</div>
</body>
</html>