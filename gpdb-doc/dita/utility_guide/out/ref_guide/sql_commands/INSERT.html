<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="INSERT" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>INSERT</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="topic1__dt20941">INSERT</h1>

  <div class="body">
    <p class="p" id="topic1__sql_command_desc">Creates new rows in a table.</p>

    <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>[ WITH [ RECURSIVE ] &lt;with_query&gt; [, ...] ]
INSERT INTO &lt;table&gt; [( &lt;column&gt; [, ...] )]
   {DEFAULT VALUES | VALUES ( {&lt;expression&gt; | DEFAULT} [, ...] ) [, ...] | &lt;query&gt;}
   [RETURNING * | &lt;output_expression&gt; [[AS] &lt;output_name&gt;] [, ...]]</code></pre>
    </div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p"><code class="ph codeph">INSERT</code> inserts new rows into a table. One can insert one or more rows
        specified by value expressions, or zero or more rows resulting from a query.</p>

      <p class="p">The target column names may be listed in any order. If no list of column names is given at
        all, the default is the columns of the table in their declared order. The values supplied by
        the <code class="ph codeph">VALUES</code> clause or query are associated with the explicit or implicit
        column list left-to-right. </p>

      <p class="p">Each column not present in the explicit or implicit column list will be filled with a
        default value, either its declared default value or null if there is no default. </p>

      <p class="p">If the expression for any column is not of the correct data type, automatic type conversion
        will be attempted.</p>

      <p class="p">The optional <code class="ph codeph">RETURNING</code> clause causes <code class="ph codeph">INSERT</code> to compute
        and return value(s) based on each row actually inserted. This is primarily useful for
        obtaining values that were supplied by defaults, such as a serial sequence number. However,
        any expression using the table's columns is allowed. The syntax of the
          <code class="ph codeph">RETURNING</code> list is identical to that of the output list of
          <code class="ph codeph">SELECT</code>.</p>

      <p class="p">You must have <code class="ph codeph">INSERT</code> privilege on a table in order to insert into it.
        When a column list is specified, you need <code class="ph codeph">INSERT</code> privilege only on the listed columns.
        Use of the <code class="ph codeph">RETURNING</code> clause requires <code class="ph codeph">SELECT</code>
        privilege on all columns mentioned in <code class="ph codeph">RETURNING</code>.  If you provide
        a <var class="keyword varname">query</var> to insert rows from a query, you must have
        <code class="ph codeph">SELECT</code> privilege on any table or column referenced in the
         query.</p>

      <div class="sectiondiv" id="topic1__section4">
        <strong class="ph b">Outputs</strong>
        <p class="p">On successful completion, an <code class="ph codeph">INSERT</code> command returns a command tag of the
          form:</p>
<pre class="pre codeblock"><code>INSERT &lt;oid&gt; &lt;count&gt;</code></pre><p class="p">The
            <var class="keyword varname">count</var> is the number of rows inserted. If count is exactly one, and
          the target table has OIDs, then <var class="keyword varname">oid</var> is the OID assigned to the inserted
          row. Otherwise <var class="keyword varname">oid</var> is zero.</p>

      </div>
    </div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Parameters</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm"><var class="keyword varname">with_query</var></dt>

          <dd class="dd pd">The <code class="ph codeph">WITH</code> clause allows you to specify one or more subqueries that can
            be referenced by name in the <code class="ph codeph">INSERT</code> query. </dd>

          <dd class="dd pd ddexpand">For an <code class="ph codeph">INSERT</code> command that includes a <code class="ph codeph">WITH</code> clause,
            the clause can only contain <code class="ph codeph">SELECT</code> statements, the
              <code class="ph codeph">WITH</code> clause cannot contain a data-modifying command
              (<code class="ph codeph">INSERT</code>, <code class="ph codeph">UPDATE</code>, or <code class="ph codeph">DELETE</code>). </dd>

          <dd class="dd pd ddexpand">It is possible for the query (<code class="ph codeph">SELECT</code> statement) to also contain a
              <code class="ph codeph">WITH</code> clause. In such a case both sets of
              <var class="keyword varname">with_query</var> can be referenced within the <code class="ph codeph">INSERT</code>
            query, but the second one takes precedence since it is more closely nested.</dd>

          <dd class="dd pd ddexpand">See <a class="xref" href="../../admin_guide/query/topics/CTE-query.html#topic_zhs_r1s_w1b" target="_blank">WITH Queries (Common Table Expressions)
</a> and
                <a class="xref" href="SELECT.html#topic1">SELECT</a> for details. </dd>

        
        
          <dt class="dt pt dlterm">
            <var class="keyword varname">table</var>
          </dt>

          <dd class="dd pd">The name (optionally schema-qualified) of an existing table.</dd>

        
        
          <dt class="dt pt dlterm">
            <var class="keyword varname">column</var>
          </dt>

          <dd class="dd pd">The name of a column in table. The column name can be qualified with a subfield name
            or array subscript, if needed. (Inserting into only some fields of a composite column
            leaves the other fields null.) </dd>

        
        
          <dt class="dt pt dlterm">DEFAULT VALUES</dt>

          <dd class="dd pd">All columns will be filled with their default values.</dd>

        
        
          <dt class="dt pt dlterm">
            <var class="keyword varname">expression</var>
          </dt>

          <dd class="dd pd">An expression or value to assign to the corresponding column. </dd>

        
        
          <dt class="dt pt dlterm">DEFAULT</dt>

          <dd class="dd pd">The corresponding column will be filled with its default value.</dd>

        
        
          <dt class="dt pt dlterm">
            <var class="keyword varname">query</var>
          </dt>

          <dd class="dd pd">A query (<code class="ph codeph">SELECT</code> statement) that supplies the rows to be inserted.
            Refer to the <code class="ph codeph">SELECT</code> statement for a description of the syntax.</dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">output_expression</var></dt>

          <dd class="dd pd">An expression to be computed and returned by the <code class="ph codeph">INSERT</code> command after
            each row is inserted. The expression can use any column names of the table. Write * to
            return all columns of the inserted row(s).</dd>

        
        
          <dt class="dt pt dlterm"><var class="keyword varname">output_name</var></dt>

          <dd class="dd pd">A name to use for a returned column.</dd>

        
      </dl>

    </div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Notes</h2><p class="p">To insert data into a partitioned table, you
        specify the root partitioned table, the table created with the <code class="ph codeph">CREATE TABLE</code>
        command. You also can specify a leaf child table of the partitioned table in an
          <code class="ph codeph">INSERT</code> command. An error is returned if the data is not valid for the
        specified leaf child table. Specifying a child table that is not a leaf child table in the
          <code class="ph codeph">INSERT</code> command is not supported. Execution of other DML commands such as
          <code class="ph codeph">UPDATE</code> and <code class="ph codeph">DELETE</code> on any child table of a partitioned
        table is not supported. These commands must be run on the root partitioned table, the
        table created with the <code class="ph codeph">CREATE TABLE</code> command.</p>
For a partitioned table,
      all the child tables are locked during the <code class="ph codeph">INSERT</code> operation when the Global
      Deadlock Detector is not enabled (the default). Only some of the leaf child tables are locked
      when the Global Deadlock Detector is enabled. For information about the Global Deadlock
      Detector, see <a class="xref" href="../../admin_guide/dml.html#topic_gdd" target="_blank">Global Deadlock Detector</a>.<p class="p">For append-optimized
        tables, Greenplum Database supports a maximum of 127 concurrent <code class="ph codeph">INSERT</code>
        transactions into a single append-optimized table. </p>
<p class="p">For writable S3 external tables,
        the <code class="ph codeph">INSERT</code> operation uploads to one or more files in the configured S3
        bucket, as described in <a class="xref" href="../../admin_guide/external/g-s3-protocol.html#amazon-emr" target="_blank">s3:// Protocol</a>. Pressing <code class="ph codeph">Ctrl-c</code> cancels the <code class="ph codeph">INSERT</code> and stops uploading
        to S3. </p>
</div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Examples</h2>
      
      <p class="p">Insert a single row into table <code class="ph codeph">films</code>: </p>

      <pre class="pre codeblock"><code>INSERT INTO films VALUES ('UA502', 'Bananas', 105, 
'1971-07-13', 'Comedy', '82 minutes');</code></pre>
      <p class="p">In this example, the <code class="ph codeph">length</code> column is omitted and therefore it will have
        the default value:</p>

      <pre class="pre codeblock"><code>INSERT INTO films (code, title, did, date_prod, kind) VALUES 
('T_601', 'Yojimbo', 106, '1961-06-16', 'Drama');</code></pre>
      <p class="p">This example uses the <code class="ph codeph">DEFAULT</code> clause for the <code class="ph codeph">date_prod</code>
        column rather than specifying a value: </p>

      <pre class="pre codeblock"><code>INSERT INTO films VALUES ('UA502', 'Bananas', 105, DEFAULT, 
'Comedy', '82 minutes');</code></pre>
      <p class="p">To insert a row consisting entirely of default values: </p>

      <pre class="pre codeblock"><code>INSERT INTO films DEFAULT VALUES;</code></pre>
      <p class="p">To insert multiple rows using the multirow <code class="ph codeph">VALUES</code> syntax: </p>

      <pre class="pre codeblock"><code>INSERT INTO films (code, title, did, date_prod, kind) VALUES
    ('B6717', 'Tampopo', 110, '1985-02-10', 'Comedy'),
    ('HG120', 'The Dinner Game', 140, DEFAULT, 'Comedy');</code></pre>
      <p class="p">This example inserts some rows into table <code class="ph codeph">films</code> from a table
          <code class="ph codeph">tmp_films</code> with the same column layout as <code class="ph codeph">films</code>: </p>

      <pre class="pre codeblock"><code>INSERT INTO films SELECT * FROM tmp_films WHERE date_prod &lt; 
'2004-05-07';</code></pre>
      <div class="p">Insert a single row into table distributors, returning the sequence number generated by the
          <var class="keyword varname">DEFAULT</var>
        clause:<pre class="pre codeblock"><code>INSERT INTO distributors (did, dname) VALUES (DEFAULT, 'XYZ Widgets')
   RETURNING did;</code></pre></div>

    </div>

    <div class="section" id="topic1__section8"><h2 class="title sectiontitle">Compatibility</h2>
      
      <p class="p"><code class="ph codeph">INSERT</code> conforms to the SQL standard. The case in which a column name list
        is omitted, but not all the columns are filled from the <code class="ph codeph">VALUES</code> clause or
        query, is disallowed by the standard. </p>

      <p class="p">Possible limitations of the <var class="keyword varname">query</var> clause are documented under
          <code class="ph codeph">SELECT</code>.</p>

    </div>

    <div class="section" id="topic1__section9"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><a class="xref" href="COPY.html#topic1">COPY</a>, <a class="xref" href="SELECT.html#topic1">SELECT</a>, <a class="xref" href="CREATE_EXTERNAL_TABLE.html#topic1">CREATE EXTERNAL TABLE</a>, <a class="xref" href="../../admin_guide/external/g-s3-protocol.html#amazon-emr" target="_blank">s3:// Protocol</a></p>

    </div>

  </div>

</body>
</html>