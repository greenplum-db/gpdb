<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="ALTER RESOURCE GROUP" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topic1" />
<link rel="stylesheet" type="text/css" href="../../out/commonltr.css" />
<title>ALTER RESOURCE GROUP</title>
</head>
<body id="topic1">

  <h1 class="title topictitle1" id="topic1__au20941">ALTER RESOURCE GROUP</h1>

  <div class="body">
    <p class="p" id="topic1__sql_command_desc">Changes the limits of a resource group.</p>

    <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock" id="topic1__sql_command_synopsis"><code>ALTER RESOURCE GROUP &lt;name&gt; SET &lt;group_attribute&gt; &lt;value&gt;</code></pre>
<p class="p">where <var class="keyword varname">group_attribute</var> is one of:</p>

      <pre class="pre codeblock"><code>CONCURRENCY &lt;integer&gt;
CPU_RATE_LIMIT &lt;integer&gt; 
CPUSET &lt;tuple&gt; 
MEMORY_LIMIT &lt;integer&gt;
MEMORY_SHARED_QUOTA &lt;integer&gt;
MEMORY_SPILL_RATIO &lt;integer&gt;</code></pre>
    </div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p"><code class="ph codeph">ALTER RESOURCE GROUP</code> changes the limits of a resource group. 
        Only a superuser can alter a resource group.</p>

        <p class="p">You can set or reset the concurrency limit of a resource group that you create for roles to control the maximum
        number of active concurrent statements in that group. You can also reset the memory or CPU
        resources of a resource group to control the amount of memory or CPU resources that all
        queries submitted through the group can consume on each segment host.</p>

        <p class="p">When you alter the CPU resource management mode or limit of a resource group, the new mode or limit is immediately applied.</p>

        <p class="p">When you alter a memory limit of a resource group that you create for roles, the new resource limit is immediately applied if current resource usage is less than or equal to the new value and there are no running transactions in the resource group. If the current resource usage exceeds the new memory limit value, or if there are running transactions in other resource groups that hold some of the resource, then Greenplum Database defers assigning the new limit until resource usage falls within the range of the new value.</p>

        <p class="p">When you increase the memory limit of a resource group that you create for external components, the new resource limit is phased in as system memory resources become available. If you decrease the memory limit of a resource group that you create for external components, the behavior is component-specific. For example, if you decrease the memory limit of a resource group that you create for a PL/Container runtime, queries in a running container may fail with an out of memory error.</p>

        <p class="p">You can alter one limit type in a single <code class="ph codeph">ALTER RESOURCE GROUP</code> call.</p>

    </div>

    <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm"><var class="keyword varname">name</var></dt>

          <dd class="dd pd">The name of the resource group to alter. </dd>

        
        
          <dt class="dt pt dlterm">CONCURRENCY <var class="keyword varname">integer</var></dt>

          <dd class="dd pd">The maximum number of concurrent transactions, including active and idle transactions, that are permitted for resource groups that you assign to roles.
            Any transactions submitted after the <code class="ph codeph">CONCURRENCY</code> value limit is
            reached are queued. When a running transaction completes, the earliest queued
            transaction is run.</dd>

          <dd class="dd pd ddexpand"> The <code class="ph codeph">CONCURRENCY</code> value
            must be an integer in the range [0 .. <code class="ph codeph">max_connections</code>]. The default 
            <code class="ph codeph">CONCURRENCY</code> value for a resource group that you create for roles is 20.</dd>

            <dd class="dd pd ddexpand"><div class="note"><span class="notetitle">Note:</span> You cannot set the <code class="ph codeph">CONCURRENCY</code> value for the <code class="ph codeph">admin_group</code> to zero (0).</div>
</dd>

        
        
          <dt class="dt pt dlterm">CPU_RATE_LIMIT <var class="keyword varname">integer</var></dt>

          <dd class="dd pd">The percentage of CPU resources to allocate to
            this resource group. The minimum CPU percentage for a resource group is 1.
            The maximum is 100. The sum of the
            <code class="ph codeph">CPU_RATE_LIMIT</code>s of all resource groups defined in the
            Greenplum Database cluster must not exceed 100.</dd>

          <dd class="dd pd ddexpand">If you alter the <code class="ph codeph">CPU_RATE_LIMIT</code> of a resource group in which
            you previously configured a <code class="ph codeph">CPUSET</code>, <code class="ph codeph">CPUSET</code> is disabled, the reserved CPU cores are returned to Greenplum Database, and <code class="ph codeph">CPUSET</code> is set to -1.</dd>

        
        
          <dt class="dt pt dlterm">CPUSET <var class="keyword varname">tuple</var></dt>

          <dd class="dd pd">The CPU cores to reserve for this resource group. The CPU cores that you specify in <var class="keyword varname">tuple</var> must be available in the system and cannot overlap with any CPU cores that you specify for other resource groups.</dd>

          <dd class="dd pd ddexpand"><var class="keyword varname">tuple</var> is a comma-separated list of single core numbers or core intervals. You must enclose <var class="keyword varname">tuple</var> in single quotes, for example, '1,3-4'.</dd>

          <dd class="dd pd ddexpand">If you alter the <code class="ph codeph">CPUSET</code> value of a resource group for which
            you previously configured a <code class="ph codeph">CPU_RATE_LIMIT</code>, <code class="ph codeph">CPU_RATE_LIMIT</code> is disabled, the reserved CPU resources are returned to Greenplum Database, and <code class="ph codeph">CPU_RATE_LIMIT</code> is set to -1.</dd>

          <dd class="dd pd ddexpand">You can alter <code class="ph codeph">CPUSET</code> for a resource group only after you have enabled resource group-based resource management for your Greenplum Database cluster.</dd>

        
        
          <dt class="dt pt dlterm">MEMORY_LIMIT <var class="keyword varname">integer</var></dt>

          <dd class="dd pd">The percentage of Greenplum Database memory resources to reserve for 
            this resource group. The minimum memory percentage for a resource group is 0.
            The maximum is 100. The default value is 0.</dd>

          <dd class="dd pd ddexpand">When <code class="ph codeph">MEMORY_LIMIT</code> is 0, Greenplum Database reserves no
            memory for the resource group, but uses global shared memory to fulfill all
            memory requests in the group. If <code class="ph codeph">MEMORY_LIMIT</code> is 0,
            <code class="ph codeph">MEMORY_SPILL_RATIO</code> must also be 0.</dd>

          <dd class="dd pd ddexpand">The sum of the
            <code class="ph codeph">MEMORY_LIMIT</code>s of all resource groups defined in the
            Greenplum Database cluster must not exceed 100. If this sum is less
            than 100, Greenplum Database allocates any unreserved memory to a resource
            group global shared memory pool.</dd>

        
        
          <dt class="dt pt dlterm">MEMORY_SHARED_QUOTA <var class="keyword varname">integer</var></dt>

          <dd class="dd pd">The percentage of memory resources to share among transactions in
            the resource group. The minimum memory shared quota percentage for a
            resource group is 0. The maximum is 100. The default
            <code class="ph codeph">MEMORY_SHARED_QUOTA</code> value is 80.</dd>

        
        
          <dt class="dt pt dlterm">MEMORY_SPILL_RATIO <var class="keyword varname">integer</var></dt>

          <dd class="dd pd">The memory usage threshold for memory-intensive operators in a transaction.
            You can specify an integer percentage value from 0 to 100 inclusive. The default
            <code class="ph codeph">MEMORY_SPILL_RATIO</code> value is 0. When <code class="ph codeph">MEMORY_SPILL_RATIO</code>
            is 0, Greenplum Database uses the
            <a class="xref" href="../config_params/guc-list.html#statement_mem"><code class="ph codeph">statement_mem</code></a>
            server configuration parameter value to control initial query operator memory.</dd>

        
      </dl>

    </div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
      
      <p class="p">Use <a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a> or
            <a class="xref" href="ALTER_ROLE.html#topic1">ALTER ROLE</a> to
        assign a specific resource group to a role (user).</p>

      <p class="p">You cannot submit an <code class="ph codeph">ALTER RESOURCE GROUP</code> command in an explicit transaction or sub-transaction.</p>

    </div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
      
      <p class="p">Change the active transaction limit for a resource group: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE GROUP rgroup1 SET CONCURRENCY 13;</code></pre>
      <p class="p">Update the CPU limit for a resource group: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE GROUP rgroup2 SET CPU_RATE_LIMIT 45;</code></pre>
      <p class="p">Update the memory limit for a resource group: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE GROUP rgroup3 SET MEMORY_LIMIT 30;</code></pre>
      <p class="p">Update the memory spill ratio for a resource group: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE GROUP rgroup4 SET MEMORY_SPILL_RATIO 25;</code></pre>
      <p class="p">Reserve CPU core 1 for a resource group: </p>

      <pre class="pre codeblock"><code>ALTER RESOURCE GROUP rgroup5 SET CPUSET '1';</code></pre>
    </div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
      
      <p class="p">The <code class="ph codeph">ALTER RESOURCE GROUP</code> statement is a Greenplum Database extension. This
        command does not exist in standard PostgreSQL.</p>

    </div>

    <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><a class="xref" href="CREATE_RESOURCE_GROUP.html#topic1">CREATE RESOURCE GROUP</a>, <a class="xref" href="DROP_RESOURCE_GROUP.html#topic1">DROP RESOURCE GROUP</a>, <a class="xref" href="CREATE_ROLE.html#topic1">CREATE ROLE</a>, <a class="xref" href="ALTER_ROLE.html#topic1">ALTER ROLE</a></p>

    </div>

  </div>

</body>
</html>